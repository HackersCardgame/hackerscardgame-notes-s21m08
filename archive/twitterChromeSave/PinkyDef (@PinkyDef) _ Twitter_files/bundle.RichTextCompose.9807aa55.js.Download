(window.webpackJsonp=window.webpackJsonp||[]).push([[73,16,69],{"1RVd":function(e,t,a){"use strict";a.r(t),a.d(t,"InlineComposeContainer",(function(){return u}));var s=a("97Jx"),i=a.n(s),n=a("ERkP"),o=a("GVND"),r=a("Ub51"),l=a("MWbm"),c=a("7N4s"),d=a("cHvH"),h=a("rHpw");const u=({getTweetHeight:e,history:t,location:a,richTextInputContext:s,typeaheadWrapper:h,parentTweetId:u,replyPressToggle:m})=>{const{isModal:g}=n.useContext(c.a);return n.createElement(d.a,null,(({windowWidth:c})=>n.createElement(o.a.Consumer,null,(o=>n.createElement(l.a,{style:p.root},n.createElement(r.a,i()({},o,{getTweetHeight:e,history:t,isInline:!0,isModal:g,location:a,parentTweetId:u,replyPressToggle:m,richTextInputContext:s,typeaheadWrapper:h,windowWidth:c})))))))},p=h.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}})));t.default=u},"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a("1YZw"),i=a("pXBW"),n=a("3XMw"),o=a.n(n),r=a("SrIh");const l=o.a.a5d4fda0,c=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:n}=a;return!a instanceof i.a&&(a.message=`Strato error occurred in ${n.id}: ${n.action}`),Object(r.a)(a,{extra:{context:n,isStrato:!0}}),t?Object(s.b)({text:e}):[]}})},"8A5z":function(e,t,a){"use strict";var s=a("ERkP"),i=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[i.a.root,e.style],viewBox:"0 0 24 24"},s.createElement("g",null,s.createElement("path",{d:"M9.008 15.205c-1.766 0-3.187-1.35-3.187-3.196v-.02c0-1.8 1.388-3.214 3.26-3.214 1.26 0 2.075.53 2.62 1.29L10.494 11c-.306-.42-.798-.695-1.357-.695-.93 0-1.684.754-1.684 1.684s.755 1.684 1.685 1.684c.578 0 1.087-.292 1.39-.735l1.22.87c-.583.802-1.368 1.394-2.737 1.394h-.002zm6.582 0c-1.764 0-3.185-1.35-3.185-3.196v-.02c0-1.8 1.386-3.214 3.258-3.214 1.262 0 2.075.53 2.622 1.29l-1.21.935c-.305-.42-.797-.694-1.356-.694-.93 0-1.685.754-1.685 1.684s.754 1.685 1.684 1.685c.577 0 1.086-.292 1.39-.735l1.22.87c-.584.803-1.37 1.395-2.738 1.395z"}),s.createElement("path",{d:"M20.5 2.02h-17c-1.24 0-2.25 1.007-2.25 2.247v15.507c0 1.238 1.01 2.246 2.25 2.246h17c1.24 0 2.25-1.008 2.25-2.246V4.267c0-1.24-1.01-2.247-2.25-2.247zm.75 17.754c0 .41-.336.746-.75.746h-17c-.414 0-.75-.336-.75-.746V4.267c0-.412.336-.747.75-.747h17c.414 0 .75.335.75.747v15.507z"})));o.metadata={width:24,height:24},t.a=o},GVND:function(e,t,a){"use strict";var s=a("ERkP");const i=s.createContext({onAnimationStarted:()=>{},onAnimationEnded:()=>{},onHeightChanged:()=>{}});t.a=i},M5JI:function(e,t,a){"use strict";a.r(t);a("ERkP");var s=a("SADN"),i=a("1RVd");t.default=Object(s.a)(i.default)},MXY2:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a("3XMw"),i=a.n(s);const n=i.a.g34f2c63,o=i.a.f70a36d0,r=i.a.d17df547,l=i.a.h735a98d,c=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?l:t?r:e.isThread?o:n({verb:""})}},SADN:function(e,t,a){"use strict";var s=a("97Jx"),i=a.n(s),n=a("ERkP"),o=a("RH6X"),r=a("rziq"),l=a("hHEM"),c=a("keCP");const d={convertEmojiToEntities:l.a.convertEmojiToEntities,element:c.a,initEditorState:l.a.initEditorState,insertTextAtCursor:l.a.insertTextAtCursor,updateOverflowStyle:l.a.updateOverflowStyle,dismissComposerCommandName:r.a,sendTweetCommandName:r.b};t.a=e=>t=>n.createElement(e,i()({},t,{richTextInputContext:d,typeaheadWrapper:o.a}))},Ub51:function(e,t,a){"use strict";var s=a("97Jx"),i=a.n(s),n=a("KEM+"),o=a.n(n),r=(a("MvUL"),a("Qavd"),a("kYxP"),a("ERkP")),l=a("6/RC"),c=a("wpu3"),d=a("rxPX"),h=a("0KEI"),u=a("eSoz"),p=a("o3oN");const m=(e,t)=>{const a=t.selectedCommunityId;return a?u.a.select(e,a):void 0};var g=Object(d.a)().propsFromState((()=>({communities:u.b,selectedCommunity:m,fetchStatus:p.c}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(h.d)("COMMUNITIES_CONTROLS"),fetchCommunityMemberships:p.a}))),_=a("kGix"),y=a("FG+G"),b=a("YeIG"),C=a("Zg3A"),f=a("MWbm"),T=a("MtXG"),w=a("t62R"),v=a("CKsB"),S=a("rHpw"),E=a("3XMw"),x=a.n(E);const R=x.a.d58baa7e;class I extends r.Component{constructor(...e){super(...e),o()(this,"_renderCount",(e=>{const t=R(e);return r.createElement(T.a.Group,null,r.createElement(T.a,null,r.createElement(w.c,{color:"white"},r.createElement(x.a.I18NFormatMessage,{$i18n:"b38e130b"},r.createElement(T.a.Value,null,x.a.ibd0106d({formattedCount:t})),r.createElement(T.a.Label,null,x.a.cface2d0({count:e}))))))})),o()(this,"_createClickHandler",(e=>()=>{const{onCommunityValueChange:t,dismiss:a}=this.props;t(e),a()}))}render(){const{communities:e,selectedCommunityId:t}=this.props;return r.createElement(f.a,{style:A.root},r.createElement(f.a,null,r.createElement(w.c,{size:"headline1",style:A.title,weight:"bold"},"Choose audience"),r.createElement(v.a,{Icon:C.a,actionText:"Everyone",isSelected:!!t,onClick:this._createClickHandler(void 0),style:A.menuItem,withIconAsThumbnail:!0})),r.createElement(f.a,null,r.createElement(w.c,{style:A.title,weight:"bold"},"Communities"),Object.keys(e).map((a=>{const s=e[a];return s?r.createElement(v.a,{actionSubText:this._renderCount(s.member_count),actionText:s.name,isSelected:t===a,key:a,media:s.media,onClick:this._createClickHandler(a),selectable:!0,style:A.menuItem}):null}))))}}const A=S.a.create((e=>({hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"}})));var M=I,k=a("efqG"),D=a("/yvb");const B=r.createElement(y.a,null);class N extends r.Component{constructor(...e){super(...e),o()(this,"_renderContent",(e=>{const{onCommunityValueChange:t,communities:a,selectedCommunityId:s}=this.props;return r.createElement(M,{communities:a,dismiss:e,onCommunityValueChange:t,selectedCommunityId:s})}))}componentDidMount(){const{fetchCommunityMemberships:e,fetchStatus:t,createLocalApiErrorHandler:a}=this.props;t===_.a.NONE&&e().catch(a())}render(){const{communities:e,selectedCommunity:t}=this.props;return Object(b.a)(e)?null:r.createElement(r.Fragment,null,r.createElement(f.a,{style:[O.container]},r.createElement(k.a,{renderContent:this._renderContent},r.createElement(D.a,{icon:B,size:"small",type:"secondary"},t?t.name:"Everyone"))))}}const O=S.a.create((e=>({button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}})));var P=g(N),H=a("PKbs");const L=(e,t)=>{const a=t.selectedCommunityId;return a?u.a.select(e,a):void 0};var F=Object(d.a)().propsFromState((()=>({community:L}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(h.d)("COMMUNITY_RULES"),fetchCommunityIfNeeded:u.a.fetchOneIfNeeded}))),U=a("21zW");class V extends r.Component{constructor(...e){super(...e),o()(this,"_renderContent",(e=>{const{community:t}=this.props;if(null!=t&&t.rules){const{rules:e}=t;return r.createElement(H.a,{badgeStyle:j.badgeStyle,headerContainerStyle:j.rulesHeader,heading:this._renderRulesHeading(),ruleContainerStyle:j.ruleContainerStyle,rules:e})}return null})),o()(this,"_renderRulesHeading",(()=>r.createElement(w.c,{weight:"bold"},"Community Rules")))}componentDidMount(){const{fetchCommunityIfNeeded:e,selectedCommunityId:t,createLocalApiErrorHandler:a}=this.props;e(t).catch(a())}render(){const{community:e,showMiddot:t}=this.props;return null!=e&&e.rules&&e.rules.length>0?r.createElement(f.a,{style:j.container},t?r.createElement(U.a,null):null,r.createElement(k.a,{renderContent:this._renderContent},r.createElement(D.a,{size:"small",style:[j.button,!t&&j.buttonWithoutMiddot],type:"text"},"Rules"))):null}}const j=S.a.create((e=>({badgeStyle:{marginRight:e.spaces.space12},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12,alignItems:"baseline"},rulesHeader:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space12},ruleContainerStyle:{paddingHorizontal:e.spaces.space16,fontWeight:"normal"},button:{paddingLeft:e.spaces.space8,paddingRight:e.spaces.space8},buttonWithoutMiddot:{marginLeft:`calc(-1 * ${e.spaces.space8})`}})));var W=F(V),z=a("H7Rt"),$=a("yZqq"),q=a("Irs7"),G=a("DlMI"),K=a("gBde"),X=a("gUPl"),Q=a("cOhU");const Y=r.createElement(G.a,null),J=r.createElement(K.a,null),Z=r.createElement(X.a,null),ee=r.createElement(Q.a,null),te=Object.freeze({all:{icon:Y,label:x.a.i8ea6d4e},community:{icon:Z,label:x.a.ec5a4a25},by_invitation:{icon:J,label:x.a.b4543009},community_members:{icon:ee,label:"Community members can reply"}});Object.freeze(["community","by_invitation"]);var ae=Object(q.a)((e=>{const{analytics:t,...a}=e,{disabled:s,value:i}=e,{icon:n,label:o}=te[i],l=r.useCallback((e=>{t.scribe({element:"conversation_control",action:"click"})}),[t]);return r.createElement(r.Fragment,null,r.createElement(f.a,{style:se.container},r.createElement($.a,a,r.createElement(D.a,{disabled:s,icon:n,onPress:l,pullLeft:!0,size:"small",style:se.button,type:"text"},o))))}));const se=S.a.create((e=>({button:{paddingLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`,paddingRight:`calc(${e.spaces.space8} + ${e.spaces.space2})`},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12}})));var ie=a("krmn"),ne=a("SrCX"),oe=a("cIoY"),re=a("w3n3"),le=a("MLl7"),ce=a("1auM"),de=a("07FG"),he=a("Q8CU"),ue=a("QbaN"),pe=a("VPdC"),me=a("oQhu"),ge=a("p+r5"),_e=a("GWvE");class ye extends r.Component{constructor(...e){super(...e),o()(this,"_setInputRef",(e=>{this._inputRef=e}))}render(){const{autoFocus:e,defaultValue:t,editable:a,label:s,onChange:i,name:n}=this.props;return r.createElement(f.a,{style:be.root},r.createElement(ge.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:s,maxLength:25,name:n,onChange:i,ref:this._setInputRef,spellCheck:"false",style:be.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object(_e.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}o()(ye,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});const be=S.a.create((e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}})));var Ce=ye,fe=a("mtvn"),Te=a("6XNv");class we extends r.PureComponent{render(){const{editable:e,label:t,last:a,max:s,min:i,onChange:n,value:o}=this.props,l=!e||i===s,c=o.toString(),d=Object(fe.a)(i,s+1).map((e=>({label:`${x.a.ia24dc8c(e)}`,value:`${e}`})));return r.createElement(Te.a,{disabled:l,label:t,onChange:n,options:d,style:[ve.selector,!a&&ve.rightMargin],value:c})}}o()(we,"defaultProps",{last:!1});const ve=S.a.create((e=>({rightMargin:{marginRight:e.spaces.space20},selector:{flexGrow:1}})));var Se=we;const Ee=x.a.caf8edc4,xe=x.a.g93586be,Re=x.a.d073b644,Ie=x.a.a2f0728e;class Ae extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleDaysChange",(e=>{const t=parseInt(e,10);this.setState((e=>{const{hours:a,minutes:s}=e.duration,i=0===t&&0===a&&0===s?1:7===t?0:a;return{duration:{days:t,hours:i,minutes:7===t?0:0===t&&0===i&&s<5?5:s}}}))})),o()(this,"_handleHoursChange",(e=>{const t=parseInt(e,10);this.setState((e=>{const{days:a,minutes:s}=e.duration;return{duration:{days:a,hours:t,minutes:0===a&&0===t&&s<5?5:s}}}))})),o()(this,"_handleMinutesChange",(e=>{const t=parseInt(e,10);this.setState((e=>{const{days:a,hours:s}=e.duration;return{duration:{days:a,hours:s,minutes:t}}}))})),this.state={duration:e.initialDuration}}render(){const{style:e,isActive:t}=this.props;return r.createElement(f.a,{style:e},r.createElement(w.c,{color:"normal",style:Me.durationLabel},t?Ee:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:s,minutes:i}}=this.state;return r.createElement(f.a,{style:Me.durationControls},r.createElement(Se,{editable:e&&t,label:xe,max:7,min:0,onChange:this._handleDaysChange,value:a}),r.createElement(Se,{editable:e&&t,label:Re,max:7===a?0:23,min:0,onChange:this._handleHoursChange,value:s}),r.createElement(Se,{editable:e&&t,label:Ie,last:!0,max:7===a?0:59,min:0===a&&0===s?5:0,onChange:this._handleMinutesChange,value:i}))}get duration(){return this.state.duration}}o()(Ae,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});const Me=S.a.create((e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}})));var ke=Ae,De=a("iY63"),Be=a("jtO7");const Ne=x.a.g589c2e1,Oe=x.a.a1e6c3a1,Pe=x.a.a739e006,He=x.a.d89a5b92,Le=x.a.c2a8118d,Fe=x.a.a8ede1de,Ue=x.a.af40a8ef;class Ve extends r.Component{constructor(e,t){super(e,t),o()(this,"_setChoice1Ref",(e=>{this._choice1=e})),o()(this,"_setChoice2Ref",(e=>{this._choice2=e})),o()(this,"_setChoice3Ref",(e=>{this._choice3=e})),o()(this,"_setChoice4Ref",(e=>{this._choice4=e})),o()(this,"_setDurationPickerRef",(e=>{this._durationPicker=e})),o()(this,"_handleValidation",(()=>{const{onValid:e,onInvalid:t}=this.props,a=this.choices,{_choice1:s,_choice2:i,_choice3:n,_choice4:o}=this,r=[s,i,n,o].filter(Boolean).every((e=>e.isValid));a&&a.length>=2&&r?e():t()})),o()(this,"_handleAdd",(()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState((({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1})))}));const{initialChoices:a}=e,s=void 0===a,i=(a||[]).length,n=i>2?i:2;this.state={autoFocus:s,choiceCount:n}}_renderChoices(){const{editable:e,initialChoices:t=[],isActive:a}=this.props,{autoFocus:s,choiceCount:i}=this.state,n=r.createElement(f.a,{style:je.rightColumn},i<4?r.createElement(D.a,{accessibilityLabel:Fe,disabled:!(e&&a),hoverLabel:{label:Ue},icon:r.createElement(De.a,null),onPress:this._handleAdd,size:"normal",style:je.addButton,type:"text"}):null);return r.createElement(f.a,{style:je.choicesAndAddButton},r.createElement(f.a,{style:je.choices},r.createElement(Ce,{autoFocus:s,defaultValue:t[0],editable:e&&a,label:Ne,name:"Choice1",onChange:this._handleValidation,ref:this._setChoice1Ref}),r.createElement(Ce,{defaultValue:t[1],editable:e&&a,label:Oe,name:"Choice2",onChange:this._handleValidation,ref:this._setChoice2Ref}),i>=3?r.createElement(Ce,{autoFocus:s,defaultValue:t[2],editable:e&&a,label:Pe,name:"Choice3",onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===i?r.createElement(Ce,{autoFocus:s,defaultValue:t[3],editable:e&&a,label:He,name:"Choice4",onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),n)}render(){const{editable:e,initialDuration:t,isActive:a,onRemove:s}=this.props;return r.createElement(f.a,{style:je.root},this._renderChoices(),r.createElement(ke,{editable:e,initialDuration:t,isActive:a,ref:this._setDurationPickerRef,style:je.durationPicker}),r.createElement(f.a,{style:je.removePollButton},r.createElement(Be.a,{color:"red500",label:Le,onPress:s,withBottomBorder:!1})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:s}=this;return[e&&e.value,t&&t.value,a&&a.value,s&&s.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const je=S.a.create((e=>({root:{backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,flexDirection:"column",overflow:"hidden",paddingTop:e.spaces.space12},choicesAndAddButton:{paddingHorizontal:e.spaces.space12,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse"},addButton:{marginBottom:e.spaces.space24,marginLeft:e.spaces.space4},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:e.borderWidths.small,padding:e.spaces.space12}})));var We=Object(q.a)(Ve),ze=a("b5s6"),$e=a("rcen"),qe=a("zmS9"),Ge=a("WPfJ");var Ke=S.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},controlsContainer:{borderBottomColor:e.colors.borderColor,borderBottomWidth:e.spaces.space1,width:"100%"},mobileControlsLayout:{flexDirection:"column"},controlsLayout:{flexDirection:"row",alignItems:"center"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:Ge.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.title4,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:Ge.e},iconEmojiPicker:{zIndex:Ge.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:Ge.a},firstToolBarButton:{marginLeft:`calc(-1 * (${e.spaces.space8} + ${e.spaces.space2}))`},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.title2,marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space12} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:`-${e.spaces.space4}`},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},mediaPreview:{marginTop:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginHorizontal:e.spaces.space4},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingLeft:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4}}))),Xe="addButton",Qe="addSubtitlesLabel",Ye="altTextLabel",Je="attachments",Ze="createPollButton",et="scheduleOption",tt="taggedUsersLabel",at="tweetTextarea_",st="toolBar",it=a("xM7j"),nt=a("tZIO"),ot=a("5mJL"),rt=a("DNho"),lt=a("oSwX"),ct=a("rFBM"),dt=a("zfvc"),ht=a("Ujvi"),ut=a("yTN1"),pt=a("v6aA"),mt=a("gpVt"),gt=a("hOZg"),_t=a("ll3R"),yt=a("J0mu"),bt=a("boUI"),Ct=a("6ZHn"),ft=a("/WPq"),Tt=a("wpLu"),wt=a("pHub"),vt=a("8A5z"),St=a("pKoL"),Et=a("ZvMt"),xt=a("9Xij");class Rt extends r.Component{render(){const{media:e,style:t}=this.props;return r.createElement(f.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{width:a,height:s}=e&&!t&&e[0].externalMediaDetails||{};let i=S.a.theme.aspectRatios.landscape;if(t){const t=this.context.featureSwitches.isTrue("media_minimal_image_crop_enabled"),a=this.context.featureSwitches.getNumberValue("media_minimal_image_crop_minimum_aspect_ratio"),s=this.context.featureSwitches.getNumberValue("media_minimal_image_crop_maximum_aspect_ratio");var n,o;if(t)i=Et.a.getImageAspectRatio(a,s,{width:null==(n=e[0].mediaFile)?void 0:n.width,height:null==(o=e[0].mediaFile)?void 0:o.height})}return r.createElement(xt.a,{ratio:t?i:a/s},r.createElement(f.a,{style:It.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return r.createElement(xt.a,{ratio:S.a.theme.aspectRatios.landscape},r.createElement(f.a,{style:It.mediaPreviewWrapper},this._renderMediaAtIndex(0,It.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return r.createElement(xt.a,{ratio:S.a.theme.aspectRatios.landscape},r.createElement(f.a,{style:It.mediaPreviewWrapper},this._renderMediaAtIndex(0,It.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return r.createElement(xt.a,{ratio:S.a.theme.aspectRatios.landscape},r.createElement(f.a,{style:It.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],It.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return r.createElement(f.a,{style:[It.column,t]},this._renderMediaAtIndex(e[0],It.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){var a,s;const{media:i,editable:n,isActive:o,onClickMedia:l,onEditMedia:c,onRemoveMedia:d,onSetMediaPreviewRef:h}=this.props,u=i[e],p=null==(a=u.mediaMetadata)?void 0:a.altText,m=null==(s=u.mediaMetadata)?void 0:s.defaultAltText;return r.createElement(St.a,{accessibilityLabel:p||m,accessibilityRole:"group",enableGif:o,key:u.id,mediaItem:u,onClick:l?l(u.id):void 0,onEdit:c?c(u.id):void 0,onRemove:d(u.id),ref:h,style:[It.mediaContainer,t],withAltTextLabel:!!p,withCloseButton:n&&o,withEditButton:c&&n&&o})}}o()(Rt,"contextType",pt.a);const It=S.a.create((e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.space12},gutterBottom:{marginBottom:e.spaces.space12},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%"}})));var At=a("S1qy"),Mt=a.n(At),kt=a("cjAp"),Dt=a.n(kt);const Bt=x.a.f0afcc0e,Nt=x.a.ha5e2e79,Ot=x.a.a3de3b68,Pt=x.a.cc2b28fc,Ht=x.a.g45af04e,Lt=x.a.ee9c4013,Ft=x.a.af40a8ef,Ut=x.a.e68b09b4,Vt=x.a.ec10ee02,jt=x.a.h735a98d,Wt=x.a.j499fbcb,zt=x.a.b7d8e3f0,$t=x.a.d1175c78,qt=x.a.bf4e9d79,Gt=x.a.e349147b,Kt=x.a.e3a24e4b,Xt=x.a.de4669e2,Qt=x.a.d2c7a41c,Yt=x.a.f7364fa1,Jt=["ja","zh-cn","zh-tw","ko"],Zt=x.a.ia24dc8c,ea=r.createElement(gt.a,null),ta=r.createElement(De.a,null),aa=r.createElement(_t.a,null),sa=r.createElement(yt.a,null);class ia extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleConversationControlsValueChange",(e=>{this.props.updateConversationControlsValue(e),this.props.updateCommunityValue(void 0)})),o()(this,"_handleCommunityValueChange",(e=>{const{updateCommunityValue:t,updateConversationControlsValue:a}=this.props;t(e),a(e?"community_members":"all")})),o()(this,"_triggerConversationControlsImpression",Object(me.a)((()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled")))),o()(this,"_shouldRenderControls",(e=>{const{isFocused:t}=this.state,{isActive:a,isInline:s,isReply:i}=this.props;return a&&!i&&(!s||(t||e))})),o()(this,"_renderConversationControls",(e=>{const{isFocused:t}=this.state,{conversationControlsValue:a,isInline:s,isReply:i}=this.props;if(i||!t&&s||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const n=this._shouldRenderControls(e),o=a===z.a.community_members||this._isScheduled();return n?r.createElement(ae,{disabled:o,onChange:this._handleConversationControlsValueChange,value:a}):null})),o()(this,"_renderMainContent",(()=>{const{additionalToolbarContent:e,autoFocus:t,data:a,editable:s,index:i,isActive:n,isExpanded:o,isInline:l,isInlineReply:c,isLast:d,keyCommandHandlers:h,onFilesAdded:u,onTextInputBlur:p,onTypeaheadStateChange:m,positionCursorAtBeginning:g,richTextInputContext:_}=this.props,{cardUrl:y,media:b,pollActive:C,quotedStatus:T,text:w}=a,v=Object(mt.b)(w)||y&&!Object(de.a)(y)&&[y],S=!!b.length||C||!!T,E=0===i&&d,x=this.props.typeaheadWrapper,R=!!_,{element:I,sendTweetCommandName:A,dismissComposerCommandName:M}=_||{},k=_?{dismissComposerCommandName:M,editorState:this.state.editorState,element:I,sendTweetCommandName:A}:void 0,D=c&&!_&&!o;return r.createElement(f.a,{style:Ke.textInputArea},r.createElement(f.a,{style:o?Ke.inputStyle:Ke.collapsedInputStyle},this._renderCommunitiesControls(),r.createElement(x,{contextText:w,isInline:l,isInlineReply:c,onTextUpdated:this._handleTextChange,onTypeaheadStateChange:m},(e=>r.createElement(ne.a,{appTextSize:"headline1",ariaLabel:Ot,autoFocus:t||n&&!l,closeButton:n&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!E?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:s,inputStyle:[Ke.textInputStyle,D&&Ke.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:R?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:p,onChange:this._getHandleChange(e),onFilesAdded:u,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:g,positionCursorAtEnd:!g,ref:this._setTextInputRef,richTextInputContext:k,styleType:"selection",testID:`${at}${i}`,value:w}))),v&&!S?r.createElement(mt.a,{index:i,isCardPreviewTombstoned:Object(de.a)(y),urls:v}):null),o?null:e)})),o()(this,"_renderCommunitiesControls",(()=>{const{index:e,isInline:t,isReply:a,selectedCommunityId:s}=this.props,i=this.context.featureSwitches.isTrue("c9s_participation_enabled");return t||a||0!==e||!i?null:r.createElement(P,{onCommunityValueChange:this._handleCommunityValueChange,selectedCommunityId:s})})),o()(this,"_renderCommunitiesRules",(e=>{const{index:t,isInline:a,isReply:s,selectedCommunityId:i}=this.props,n=this.context.featureSwitches.isTrue("c9s_enabled");return!a&&!s&&0===t&&n&&i?r.createElement(W,{selectedCommunityId:i,showMiddot:!e}):null})),o()(this,"_calcNumberOfLines",(()=>{const{richTextInputContext:e,isInline:t,data:a,isActive:s}=this.props,i=!!e,{media:n,pollActive:o,quotedStatus:r}=a,l=!!n.length||!!o||!!r;return i&&(t||l)||!s?1:4})),o()(this,"_renderScheduledTweetLegend",(()=>{const{scheduledFor:e}=this.props;return r.createElement(qe.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e})})),o()(this,"_handlePressScheduledTweetLegend",(()=>{const{history:e,analytics:t,setActiveParentKey:a}=this.props;e.push("/compose/tweet/schedule"),t.scribe({element:"tweet_legend",action:"click"}),a()})),o()(this,"_renderEmojiPicker",(()=>r.createElement(ie.a,{onEmojiSelect:this._handleInsertEmoji,size:"normal",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0}))),o()(this,"_getEmojiPickerButtonStyles",Object(me.a)((()=>[Ke.iconEmojiPicker,Ke.toolBarButton]))),o()(this,"_isSchedulingDisabled",(()=>{const{conversationControlsValue:e,index:t,isLast:a,data:{pollActive:s,quotedStatus:i,text:n,media:o,mediaTags:r}}=this.props,l=0===t&&a,c=e!==z.a.all;return Boolean(s||!l||i&&""===n&&!o.length||c||r.length>0)})),o()(this,"_renderSchedulingButton",(()=>r.createElement(D.a,{accessibilityLabel:Nt,disabled:this._isSchedulingDisabled(),hoverLabel:{label:jt},icon:sa,onClick:this._handleClickScheduler,size:"normal",style:Ke.toolBarButton,testID:et,type:"text"}))),o()(this,"_handleClickScheduler",(()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()})),o()(this,"_renderCloseButton",(()=>{const{onRemoveComposer:e}=this.props;return r.createElement(D.a,{accessibilityLabel:Lt,hoverLabel:{label:Ut},icon:ea,onPress:e,size:"small",type:"text"})})),o()(this,"_renderTweetAttachment",(()=>{const{data:e,editable:t,isActive:a}=this.props,{media:s,pollActive:i,initialPollChoices:n,initialPollDuration:o,quotedStatus:l}=e;return 0!==s.length||i||l?r.createElement(f.a,{onClick:this._handleFocus,style:[Ke.attachmentContainer,Ke.tweetAttachmentArea],testID:Je},s.length>0?r.createElement(Rt,{editable:t,isActive:a,media:s,onClickMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onEditMedia:this.hasAttachedImage||this.hasAttachedVideo?this._handleClickMediaDetail:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:Ke.mediaPreview}):null,a?this._renderMediaActions():null,i?r.createElement(We,{editable:t,initialChoices:n,initialDuration:o,isActive:a,onInvalid:this._handlePollInvalid,onRemove:this._handlePollRemove,onValid:this._handlePollValid,ref:this._setPollCreatorRef}):null,l?this._renderQuoteTweet(l):null):null})),o()(this,"_renderQuoteTweet",(e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?r.createElement(it.a,null,r.createElement($e.c,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):r.createElement(ze.a,{isCondensed:t.length>0,style:Ke.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})})),o()(this,"_renderToolbar",(e=>{const{additionalToolbarContent:t,hidePollAndScheduling:a,isReply:s,richTextInputContext:i,isSelfThreadReply:n,isInlineReply:o}=this.props,l=!!i,c=!o&&!a;return r.createElement(f.a,{style:Ke.toolBar,testID:st},r.createElement(f.a,{style:Ke.toolBarIconsContainer},this._renderMediaPickerButton(),this._renderGifButton(),c?this._renderPollButton():null,l?this._renderEmojiPicker():null,c?this._renderSchedulingButton():null),r.createElement(f.a,{style:Ke.toolBarIconsContainer},e?this._renderCountdownCircle():null,s&&!n||!e?null:r.createElement(r.Fragment,null,r.createElement(f.a,{style:Ke.separator}),this._renderAddComposerButton()),t))})),o()(this,"_addOverflowStyle",(e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),s=a.length,i=this._getParsedTweet(a).validRangeEnd,n=i+1<s;if(this.state.hasOverflowStyle||n){const a=n?i+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:n}}return{editorState:e,hasOverflowStyle:n}})),o()(this,"_getHandleChange",Object(me.a)((e=>t=>{e(t),this._handleTextChange(t)}))),o()(this,"_handleTextChange",(e=>{const{data:{key:t,text:a},onTextChange:s,richTextInputContext:i}=this.props;let n;if(i){n=e.getCurrentContent().getPlainText();const t=i.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(t))}else n=nt.a.replaceCarriageReturns(e.target.value);a!==n&&s(n,t)})),o()(this,"_handleClickAltTextShortcut",(()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})})),o()(this,"_handleClickSubtitlesShortcut",(()=>{const{analytics:e}=this.props;e.scribe({element:"subtitles_button",action:"click"})})),o()(this,"_handleClickMediaDetail",(e=>()=>{const{analytics:t,history:a}=this.props;t.scribe({element:"media_detail_button",action:"click"}),(this.hasAttachedImage||this.hasAttachedVideo)&&a.push("/compose/tweet/media",{mediaId:e,tab:this.hasAttachedVideo?this._videoTrimmerEnabled?"trimmer":"subtitles":"crop"})})),o()(this,"_handleDragDrop",(e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:s}=this.props;a?t({text:Pt}):s(e)})),o()(this,"_handleMediaRemoveFactory",(e=>()=>{this.props.onRemoveMedia(this.props.index,e)})),o()(this,"_handleInsertEmoji",(e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a)return;const s=a.insertTextAtCursor(t,e.text);this._handleTextChange(s)})),o()(this,"_validateMedia",(e=>{const{data:{media:t}}=this.props;return c.c(t.concat(e))})),o()(this,"_handlePollAdd",(()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)})),o()(this,"_handlePollRemove",(()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"remove_poll",action:"click"}),a({pollActive:!1},t)})),o()(this,"_handlePollInvalid",(()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;e&&a({pollValid:!1},t)})),o()(this,"_handlePollValid",(()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;!e&&a({pollValid:!0},t)})),o()(this,"_handleWrapperClick",(e=>{e.target instanceof Element&&e.target.closest('[role="button"],a,input,textarea,select')||this.focus()})),o()(this,"_handleFocus",(()=>{const{isActive:e,index:t,onFocus:a,setActiveParentKey:s}=this.props;s(),e||(window.requestAnimationFrame((()=>{this._mediaPreviewRef&&this._mediaPreviewRef._playVideo()})),a(t))})),o()(this,"_handleEditorFocus",(()=>this.setState({isFocused:!0}))),o()(this,"_formatCountdownNumber",(e=>Zt(Math.ceil(e/this._userLanguageWeight)))),o()(this,"_getPlaceHolderText",(()=>{const{data:{quotedStatus:e,pollActive:t},isReply:a,isSelfThreadReply:s,index:i}=this.props;return e?Xt:t?Yt:a&&!s?Qt:s||i>0?Kt:Gt})),o()(this,"_getNumberOfAltTextEntries",(()=>{const{data:{media:e}}=this.props;return e.reduce(((e,t)=>{var a;return null!=(a=t.mediaMetadata)&&a.altText?e+1:e}),0)})),o()(this,"_getParsedTweet",Object(me.a)((e=>{const t=Dt.a[this.props.twitterTextConfigurationVersion];return Mt()(e,t)}))),o()(this,"_isEmpty",(()=>{const{data:e}=this.props;return Object(he.b)(e)})),o()(this,"_isScheduled",(()=>{const{data:{scheduledFor:e}}=this.props;return Object(ue.h)(e)})),o()(this,"_setPollCreatorRef",(e=>{this._pollCreatorRef=e})),o()(this,"_handleSetMediaPreviewRef",(e=>{this._mediaPreviewRef=e})),o()(this,"_setTextInputRef",(e=>{this._textInputRef=e}));const{richTextInputContext:a,userLanguage:s,data:{text:i}}=e,{initEditorState:n}=a||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=s&&Jt.indexOf(s)>-1?2:1,this.state={editorState:n&&n(i),hasOverflowStyle:!1,isFocused:!1}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some((e=>e.mediaFile&&!(e.mediaFile instanceof ce.a)&&e.mediaFile.isVideo)))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef._pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{isActive:e,isExpanded:t,isInline:a,isLast:s,loggedInUser:i,withAvatar:n,windowWidth:o}=this.props,l=!this._isEmpty(),c=this._shouldRenderControls(l),d=o<S.a.theme.breakpoints.small;return r.createElement(f.a,{onClick:this._handleWrapperClick,onFocus:this._handleFocus,style:[Ke.root,!e&&Ke.blurStyle]},r.createElement(ot.a,{avatarCell:r.createElement(r.Fragment,null,n?r.createElement(rt.a.Consumer,null,(({avatarSize:e})=>r.createElement(lt.default,{accessibilityLabel:i?i.name:void 0,screenName:i?i.screen_name:void 0,size:e,style:Ke.avatar,uri:i?i.profile_image_url_https:void 0,withLink:a}))):null,s?null:r.createElement(f.a,{style:[Ke.conversationLine,!n&&Ke.conversationLineWithOverflow]})),avatarCellStyle:t?Ke.avatarContainerExpanded:Ke.avatarContainer,cellStyle:Ke.rightColumn},this._renderScheduledTweetLegend(),r.createElement(f.a,{onFocus:this._handleEditorFocus,style:Ke.inputArea},r.createElement(ct.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleDragDrop,style:Ke.dragDrop},(e=>r.createElement(r.Fragment,null,r.createElement(f.a,{style:[Ke.composeBoxContainer]},this._renderMainContent()))))),r.createElement(f.a,{style:[c&&Ke.controlsContainer,d?Ke.mobileControlsLayout:Ke.controlsLayout]},this._renderConversationControls(l),this._renderCommunitiesRules(d)),r.createElement(dt.b,{show:e&&t},this._renderToolbar(l))))}_renderMediaPickerButton(){const{data:{media:e},onFilesAdded:t,setActiveParentKey:a}=this.props,s=this.mediaAttachDisabled,i=e.length<3;return r.createElement(pe.a,{acceptGifs:0===e.length,disabled:s,multiple:i,onChange:t,onPress:a,style:[Ke.toolBarButton,Ke.firstToolBarButton],type:"text"})}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:s,setActiveParentKey:i}=this.props,n=t||e.length||!s;return r.createElement(re.a,{enabled:!n,gifSearchKeySource:le.a.Composition,history:a,onPress:i})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},loggedInUser:s}=this.props,i=this._isScheduled(),n=!(!(t||e.length||a||i)&&s);return r.createElement(D.a,{accessibilityLabel:Bt,disabled:n,hoverLabel:{label:Vt},icon:aa,onPress:this._handlePollAdd,size:"normal",style:Ke.toolBarButton,testID:Ze,type:"text"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,s=0!==a.length,i=t.some((e=>e.mediaFile&&e.mediaFile.isGif))||this.hasExternalMedia;return this.hasAttachedImage||this.hasAttachedVideo||e||i?r.createElement(f.a,{style:Ke.imageActions},e&&e.url&&e.provider?r.createElement(f.a,{style:Ke.addImageTextPadding},r.createElement(oe.a,{gifUrl:e.url,provider:e.provider})):null,this.hasAttachedImage&&!this._isScheduled()?r.createElement(w.c,{accessibilityLabel:$t,color:"gray700",link:"/compose/tweet/tags",style:[Ke.addImageTextContainer,Ke.addImageTextPadding]},s?this._renderTaggedUsers():this._renderTagPeopleLabel()):null,this.hasAttachedImage||i?r.createElement(w.c,{accessibilityLabel:Wt({numberOfImages:t.length}),color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}},onPress:this._handleClickAltTextShortcut,style:Ke.addImageTextContainer},this._renderAltTextLabel()):null,this._captionsUploadEnabled&&this.hasAttachedVideo?this._renderSubtitlesLabel():null):null}_renderTagPeopleLabel(){return r.createElement(w.c,{color:"gray700",size:"subtext2"},r.createElement(bt.a,{style:Ke.addImageActionIcon}),$t)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,a=e.map((e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str})));return r.createElement(w.c,{color:"gray700",size:"subtext2",testID:tt},r.createElement(Ct.a,{style:Ke.addImageActionIcon}),r.createElement(ht.a,{loggedInUserId:null==t?void 0:t.id_str,users:a}))}_renderAltTextLabel(){const{data:{media:e}}=this.props,t=e[0].mediaMetadata;return this.hasAttachedAltText?e.length>1?r.createElement(w.c,{color:"gray700",size:"subtext2",testID:Ye},r.createElement(Tt.a,{style:Ke.addImageActionIcon}),zt({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):r.createElement(w.c,{color:"gray700",numberOfLines:1,size:"subtext2",testID:Ye},r.createElement(Tt.a,{style:Ke.addImageActionIcon}),null==t?void 0:t.altText):r.createElement(w.c,{color:"gray700",size:"subtext2",testID:Ye},r.createElement(ft.a,{style:Ke.addImageActionIcon}),Wt({numberOfImages:e.length}))}_renderSubtitlesLabel(){const{data:{media:e}}=this.props,t=this.attachedSubtitles?wt.a:vt.a;return r.createElement(w.c,{color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:e[0].id,tab:"subtitles"}},onPress:this._handleClickSubtitlesShortcut,size:"subtext2",style:Ke.addImageTextContainer,testID:Qe},r.createElement(t,{style:Ke.addImageActionIcon}),this.attachedSubtitles?this.attachedSubtitles.displayName:qt)}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=Dt.a[t],s=this._getParsedTweet(e).weightedLength;return r.createElement(ut.a,{count:s,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{disableAddTweet:e,loggedInUser:t,isInline:a,onAddComposer:s}=this.props,i=this._isEmpty(),n=this._isScheduled(),o=e||i||n||!t;return r.createElement(D.a,{accessibilityLabel:Ht,disabled:o,hoverLabel:{label:Ft},icon:ta,link:!a||i||o?void 0:"/compose/tweet",onPress:s,size:"small",testID:Xe,type:"secondary"})}get pollChoices(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.choices:void 0}get pollDuration(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.duration:void 0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,s=e.length,i=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif})),n=e.some((e=>e.mediaFile&&!(e.mediaFile instanceof ce.a)&&e.mediaFile.isVideo));return 4===s||i||n||t||this.hasExternalMedia||!a}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage}))}get hasAttachedVideo(){const{data:{media:e}}=this.props,t=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isVideo}));return!!t&&(this._videoTrimmerEnabled=this.context.featureSwitches.isTrue("responsive_web_video_trimmer_enabled"),this._captionsUploadEnabled=this.context.featureSwitches.isTrue("responsive_web_captions_upload_enabled"),(this._videoTrimmerEnabled||this._captionsUploadEnabled)&&t)}get attachedSubtitles(){var e;const{data:{media:t}}=this.props;if(!this.hasAttachedVideo)return;const a=t.find((e=>e.mediaFile&&!(e.mediaFile instanceof ce.a)&&e.mediaFile.isVideo));return null==a||null==(e=a.mediaMetadata)?void 0:e.subtitles}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some((e=>!!e.externalMediaDetails))}}o()(ia,"contextType",pt.a),o()(ia,"defaultProps",{twitterTextConfigurationVersion:"defaults",withAvatar:!0,conversationControlsValue:"all",updateConversationControlsValue:()=>{}});var na=Object(q.a)(ia);const oa=r.createElement(w.c,{weight:"bold"}),ra=r.createElement(w.c,{color:"link"}),la=e=>`@${e}`;var ca=a("SrIh");const da=e=>(null==e?void 0:e.screen_name)||"",ha=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:s})=>{const i={replyToOne:({userName:e})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"e34022a7"},r.cloneElement(ra,null,x.a.b50e199a({userName:la(e)}))),replyToTwo:({userOneName:e,userTwoName:t})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"bfd9c99a"},r.cloneElement(ra,null,x.a.f2e4dd37({replyUserName:la(e),otherUserName:la(t)}))),replyToThree:({userOneName:e,userTwoName:t,userThreeName:a})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"g7a1000e"},r.cloneElement(ra,null,x.a.eccfddc3({userOneName:la(e),userTwoName:la(t),userThreeName:la(a)}))),replyToMany:({userOneName:e,userTwoName:t,othersCount:a})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"i558c201"},r.cloneElement(ra,null,x.a.h758cd22({userOneName:la(e),userTwoName:la(t),othersCount:a}))),communityReplyToOne:({communityName:e,userName:t})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"j935bcde",communityName:e},r.cloneElement(ra,null,x.a.e9f8a0eb({userName:la(t)}))),communityReplyToTwo:({communityName:e,userOneName:t,userTwoName:a})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"i7bd9c8e",communityName:e},r.cloneElement(ra,null,x.a.df7e9fbc({replyUserName:la(t),otherUserName:la(a)}))),communityReplyToThree:({communityName:e,userOneName:t,userTwoName:a,userThreeName:s})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"cfa0049d",communityName:e},r.cloneElement(ra,null,x.a.b45fa505({userOneName:la(t),userTwoName:la(a),userThreeName:la(s)}))),communityReplyToMany:({communityName:e,userOneName:t,userTwoName:a,othersCount:s})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"jfc8e4b4",communityName:e},r.cloneElement(ra,null,x.a.a4383815({userOneName:la(t),userTwoName:la(a),othersCount:s}))),exclusiveReplyToOne:({userName:e})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"a4e11010"},r.cloneElement(ra,null,x.a.ff792e35({userName:la(e)})),r.cloneElement(oa,null,x.a.a18d8f1c)),exclusiveReplyToTwo:({userOneName:e,userTwoName:t})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"cf1b3321"},r.cloneElement(ra,null,x.a.g7d5e985({replyUserName:la(e),otherUserName:la(t)})),r.cloneElement(oa,null,x.a.af82725c)),exclusiveReplyToThree:({userOneName:e,userTwoName:t,userThreeName:a})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"c83d647e"},r.cloneElement(ra,null,x.a.fe5a61e9({userOneName:la(e),userTwoName:la(t),userThreeName:la(a)})),r.cloneElement(oa,null,x.a.f7126257)),exclusiveReplyToMany:({userOneName:e,userTwoName:t,othersCount:a})=>r.createElement(x.a.I18NFormatMessage,{$i18n:"fec57cab"},r.cloneElement(ra,null,x.a.bc9dd514({userOneName:la(e),userTwoName:la(t),othersCount:a})),r.cloneElement(oa,null,x.a.de5071ba))},n=c.a({inReplyToStatus:a,loggedInUserId:s}).filter((({id_str:e})=>t.indexOf(e)<0)),{user:o,exclusivity_info:l}=a.retweeted_status||a,[d,h]=n.filter((({id_str:e})=>e!==o.id_str)),[u,p,m]=[o,d,h].map(da),g=n.length-2;switch(n.length){case 0:return Object(ca.a)("Compose reply context should not have 0 recipients"),null;case 1:return e?i.communityReplyToOne({communityName:e,userName:u}):l?i.exclusiveReplyToOne({userName:u}):i.replyToOne({userName:u});case 2:return e?i.communityReplyToTwo({communityName:e,userOneName:u,userTwoName:p}):l?i.exclusiveReplyToTwo({userOneName:u,userTwoName:p}):i.replyToTwo({userOneName:u,userTwoName:p});case 3:return e?i.communityReplyToThree({communityName:e,userOneName:u,userTwoName:p,userThreeName:m}):l?i.exclusiveReplyToThree({userOneName:u,userTwoName:p,userThreeName:m}):i.replyToThree({userOneName:u,userTwoName:p,userThreeName:m});default:return e?i.communityReplyToMany({communityName:e,userOneName:u,userTwoName:p,othersCount:g}):l?i.exclusiveReplyToMany({userOneName:u,userTwoName:p,othersCount:g}):i.replyToMany({userOneName:u,userTwoName:p,othersCount:g})}};var ua=r.memo(ha),pa=a("fs1G"),ma=a("BLtI"),ga=a("kY28");function _a(e){null==e||e.preventDefault()}const ya=S.a.create((e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}})));var ba=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:s,onPress:i,shouldDisplayRepliesText:n,showParentTweet:o=!0})=>r.createElement(f.a,null,o?r.createElement(ma.b,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:pa.a,onAvatarClick:_a,onEntityClick:_a,onMediaClick:_a,onReplyContextClick:_a,replyContext:ga.a.ReplyContextTypes.None,tweet:a,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,r.createElement(f.a,{style:ya.replyUsersContainer},r.createElement(ot.a,{avatarCell:o?r.createElement(f.a,{style:ya.conversationLine}):null,avatarCellStyle:ya.conversationLineContainer,cellStyle:ya.repliesTextContainer,style:ya.grid},n?r.createElement(w.c,{accessibilityRole:"button",color:"gray700",onPress:i,style:o&&ya.repliesMessage},r.createElement(ua,{communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:s})):null))),Ca=a("Tb0w"),fa=a("ge3j"),Ta=a("1YZw"),wa=a("pidX"),va=a("zhf3"),Sa=a("P1r1"),Ea=a("RqPI"),xa=a("XOJV"),Ra=a("G6rE"),Ia=a("AspN"),Aa=a("hqKg"),Ma=a("oEGd");const ka=e=>e.parentTweetId||(e.isInline?va.a.homeTimeline:va.a.modal),Da=(e,t)=>{const a=ka(t);return fa.m(e,a)},Ba=(e,t)=>{const a=ka(t);return fa.o(e,a)},Na=(e,t)=>{const a=ka(t);return Ga(e,t)?z.a.community_members:fa.n(e,a)},Oa=(e,t)=>{const a=ka(t),s=Ga(e,t);return fa.l(e,a)||s},Pa=(e,t)=>{const a=za(e,t),s=(null==a?void 0:a.community_id_str)||Oa(e,t),i=s?u.a.select(e,s):void 0;return i?i.name:void 0},Ha=(e,t)=>{const a=ka(t);return fa.p(e,a)},La=(e,t)=>{const a=ka(t);return fa.k(e,a)},Fa=e=>(t,a)=>{const s=((e,t)=>t.location.state)(0,a);return s?e(s):void 0},Ua=Object(Aa.createSelector)(((e,t)=>t.activeUser),Ra.e.selectLoggedInUser,((e,t)=>e||t)),Va=(e,t)=>t.parentTweetId||ja(e,t)||Wa(e,t),ja=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},Wa=Fa((e=>e.inReplyToStatusId)),za=(e,t)=>{const a=Va(e,t);return a?xa.a.selectHydrated(e,a):void 0},$a=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,qa=Fa((e=>e.hasArticleNudge)),Ga=Fa((e=>e.selectedCommunityId)),Ka=Fa((e=>e.convoCardData)),Xa=Fa((e=>e.externalMedia)),Qa=Fa((e=>e.externalMediaFiles)),Ya=Fa((e=>e.defaultText)),Ja=(e,t)=>{const a=Ya(e,t),s=Object(wa.a)(t.location);return($a(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&s?s:a},Za=Fa((e=>e.quotedStatusId)),es=Fa((e=>e.quotedStatus)),ts=(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:es(e,t))(e,t)||((e,t)=>{const a=Za(e,t);return a?xa.a.selectHydratedMemoized(e,a):void 0})(e,t),as=Fa((e=>e.isSelfThreadReply)),ss=Fa((e=>e.positionCursorAtBeginning)),is=Fa((e=>e.promotedContent)),ns=({mediaIds:e,...t})=>t,os={addComposer:fa.a,addToast:Ta.b,createLocalApiErrorHandler:Object(h.d)("SCREEN_COMPOSE_V2"),createNudge:fa.d,fetchTweetIfNeeded:xa.a.fetchOneIfNeeded,removeComposer:fa.h,resetDraft:fa.i,retweet:xa.a.retweet,recordNudgeAction:fa.f,recordNudgeResult:fa.g,schedule:fa.j,draftTweet:fa.e,send:fa.s,updateActiveComposerIndex:fa.u,updateConvoCardState:Ca.b,updateConversationControlsValue:fa.w,updateCommunityValue:fa.v,uploadMedia:Ia.o,addMedia:Ia.b,processMultipleMedia:Ia.f,removeMediaUpload:Ia.h,updateSingleComposer:fa.y,setActiveParentKey:fa.t,copyDataFromInlineComposerToModalComposer:fa.b,copyDataFromInlineReplyComposerToModalComposer:fa.c};var rs=Object(Ma.e)((()=>Object(Aa.createStructuredSelector)({activeComposerIndex:La,activeUser:Ua,composerData:Object(Aa.createSelector)(Da,Ja,ts,Ia.i,((e,t,a,s)=>e.map(((e,i)=>({...ns(e),media:s.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===i?a:void 0,text:0===i&&t?t:e.text}))))),conversationControlsValue:Na,dataSaverMode:Sa.k,excludedRecipients:Ba,externalMedia:Xa,externalMediaFiles:Qa,hasArticleNudge:qa,inReplyToStatus:za,inReplyToStatusId:Va,isIntentRoute:$a,isSelfThreadReply:as,isSending:Ha,positionCursorAtBeginning:ss,loggedInUser:Ra.e.selectLoggedInUser,prepopulatedText:Ja,promotedContent:is,scheduledFor:fa.q,selectedCommunityId:Oa,selectedCommunityIdFromLocationState:Ga,selectedCommunityName:Pa,sendingProgress:fa.r,convoCardData:Ka,userLanguage:Ea.l,quotedStatusId:Za})),os),ls=a("45mF"),cs=a("c0ZR"),ds=a("W5XZ"),hs=a("MXY2"),us=a("I8M8"),ps=a("eyty"),ms=a("ymux"),gs=a("0pUJ"),_s=a("xZGM");const ys=(e,t)=>Object(_s.k)(e,_s.d);var bs=Object(d.a)().propsFromState((()=>({shouldShowHideReplyTip:ys}))).propsFromActions((({conversationModule:e={}})=>({addFlag:_s.i,addToast:Ta.b,block:Ra.e.block,createLocalApiErrorHandler:Object(h.d)("NUDGE"),hideReply:xa.a.hideReply,mute:gs.a,recordNudgeAction:fa.f,recordNudgeResult:fa.g,unblock:Ra.e.unblock,unmute:Ra.e.unmute,updateDismissCause:e&&e.updateDismissCause}))),Cs=a("VjLy"),fs=a("95Se"),Ts=a("xKuM");const ws=x.a.cd33a61c,vs=x.a.g97558f6,Ss=x.a.cd80d930,Es=x.a.b0476eb2,xs=x.a.j24c37b2;class Rs extends r.Component{constructor(...e){super(...e),o()(this,"_handleHideMoreInfo",(()=>{const{hideEducation:e}=this.props;e()}))}render(){const{isSmallBreakPoint:e}=this.props;return r.createElement(dt.b,{animateMount:!0,duration:"longer",show:!0,type:"fade"},r.createElement(f.a,{style:Is.moreInfoContainer},r.createElement(Ts.a,{leftControl:r.createElement(D.a,{icon:r.createElement(fs.a,{onClick:this._handleHideMoreInfo}),pullLeft:!0,type:"text"}),style:Is.moreInfoAppBar,title:"More Info"}),r.createElement(f.a,{style:Is.moreInfoContentContainer},r.createElement(w.c,{color:"normal",size:"headline1",style:Is.headlineText,weight:"bold"},ws),r.createElement(w.c,{color:"gray700",style:Is.moreInfoFirstDescription},Ss),r.createElement(w.c,{color:"normal",size:"headline1",style:Is.headlineText,weight:"bold"},vs),r.createElement(w.c,{color:"gray700",style:Is.moreInfoSecondDescription},Es),e&&r.createElement(D.a,{onClick:this._handleHideMoreInfo,style:Is.confirmationButton,type:"neutral"},xs))))}}const Is=S.a.create((e=>({headlineText:{marginBottom:e.spaces.space12},confirmationButton:{marginVertical:e.spaces.space20},moreInfoAppBar:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},moreInfoContainer:{borderRadius:e.borderRadii.xLarge},moreInfoContentContainer:{padding:e.spaces.space20,paddingBottom:0},moreInfoFirstDescription:{marginBottom:e.spaces.space16},moreInfoSecondDescription:{marginBottom:e.spaces.space16}})));var As=a("euJ+"),Ms=a("1bnC"),ks=a("Qwev"),Ds=a("yrzJ"),Bs=a("eb3s"),Ns=a("sgih"),Os=a("P2xQ");const Ps=Object.freeze({PotentiallyToxicTweet:"PotentiallyToxicTweet",ReviseOrMute:"ReviseOrMute",ReviseOrBlock:"ReviseOrBlock",ReviseOrHideThenBlock:"ReviseOrHideThenBlock"}),Hs=Object.freeze({BlockUser:"BlockUser",CancelOnBlockUserPrompt:"CancelOnBlockUserPrompt",CancelTweet:"CancelTweet",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",NudgeNotShown:"NudgeNotShown",ReviseTweet:"ReviseTweet",SendTweet:"SendTweet"}),Ls=Object.freeze({BlockUser:"BlockUser",CancelComposer:"CancelComposer",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",SaveTweetToDrafts:"SaveTweetToDrafts",SentTweet:"SentTweet",TweetSentWithoutShowingNudge:"TweetSentWithoutShowingNudge"}),Fs=x.a.ic011119,Us=x.a.f6b7745a,Vs=x.a.a75cc0f8,js=x.a.a6450e83,Ws=x.a.a9fd20be,zs=x.a.i2b9632d,$s=x.a.e133be4e,qs=x.a.ge5067bb,Gs=x.a.ea626ab3,Ks=x.a.i62a03aa,Xs=x.a.h3032750,Qs=x.a.af250eb6,Ys=x.a.ib147a39,Js=x.a.e8ff17e5,Zs=x.a.e3275464;class ei extends r.Component{constructor(...e){super(...e),o()(this,"_isNudgeEducationEnabled",this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"state",{loadingSecondaryButton:!1,showMoreInfo:!1}),o()(this,"_renderInnerBody",(()=>{const{loadingSecondaryButton:e}=this.state;return r.createElement(r.Fragment,null,r.createElement(w.c,{align:"center",color:"normal",size:"headline1",style:ti.headlineText,weight:"bold"},this._getHeadline()),r.createElement(w.c,{align:"center",color:"gray700"},this._getDescription()),r.createElement(w.c,{align:"center",color:"link",onClick:this._handleMoreInfo,style:ti.moreInfoButton},Xs),r.createElement(f.a,{style:ti.buttons},r.createElement(D.a,{onPress:this._handleRevise,style:ti.button,type:"secondary"},Js),r.createElement(D.a,{onPress:this._handleSecondaryAction,style:ti.button,type:"secondary"},e?this._renderSpinner():this._getSecondaryActionLabel()),r.createElement(D.a,{onPress:this._handleSend,style:ti.button,type:"secondary"},Zs)))})),o()(this,"_renderSpinner",(()=>{const{nudgeType:e}=this.props,t=e===Ps.ReviseOrMute?Os.g:e===Ps.ReviseOrBlock?Qs:Ys;return r.createElement(ks.a,{accessibilityLabel:t,style:ti.spinner})})),o()(this,"_renderBlockSheet",(()=>{const{recipient:{screen_name:e}}=this.props,t=r.createElement(Ds.a,{color:"normal",screenName:e}),a=r.createElement(Ds.a,{screenName:e});return r.createElement(Bs.a,{cancelButtonLabel:Ks,confirmButtonLabel:js,confirmButtonType:"destructive",headline:r.createElement(x.a.I18NFormatMessage,{$i18n:"ja6527ba"},t),onCancel:this._handleBlockCancel,onConfirm:this._handleBlockUser,text:r.createElement(x.a.I18NFormatMessage,{$i18n:"a899eb22"},a)})})),o()(this,"_getDescription",(()=>{const{nudgeType:e,recipient:t}=this.props,a=r.createElement(Ds.a,{screenName:t.screen_name});switch(e){case Ps.ReviseOrMute:return r.createElement(x.a.I18NFormatMessage,{$i18n:"d98723c4"},a);case Ps.ReviseOrBlock:return r.createElement(x.a.I18NFormatMessage,{$i18n:"fa1a3797"},a);case Ps.ReviseOrHideThenBlock:return r.createElement(x.a.I18NFormatMessage,{$i18n:"fa2ffaa7"},a);default:return null}})),o()(this,"_getHeadline",(()=>{const{nudgeType:e}=this.props;switch(e){case Ps.ReviseOrMute:return Fs;case Ps.ReviseOrBlock:return Us;case Ps.ReviseOrHideThenBlock:return Vs;default:return null}})),o()(this,"_getSecondaryActionLabel",(()=>{const{nudgeType:e}=this.props;switch(e){case Ps.ReviseOrMute:return Os.f;case Ps.ReviseOrBlock:return js;case Ps.ReviseOrHideThenBlock:return qs;default:return null}})),o()(this,"_handleSecondaryAction",(()=>{const{nudgeType:e}=this.props;switch(this.setState({loadingSecondaryButton:!0}),e){case Ps.ReviseOrMute:this._handleMuteUser();break;case Ps.ReviseOrBlock:this._handleBlockUser();break;case Ps.ReviseOrHideThenBlock:this._handleHideReplyThenBlock();break;default:return}})),o()(this,"_handleSend",(()=>{const{onSend:e}=this.props;this._recordNudgeAction(Hs.SendTweet),e()})),o()(this,"_handleBlockCancel",(()=>{const{onDiscard:e,showBlockModal:t}=this.props;t&&(this._recordNudgeAction(Hs.CancelOnBlockUserPrompt),this._handleHideReply()),e()})),o()(this,"_handleBlockUser",(()=>{const{addToast:e,block:t,onDiscard:a,recipient:s,showBlockModal:i,unblock:n}=this.props;this._recordNudgeAction(Hs.BlockUser),t(s.id_str).then((()=>{i&&this._handleHideReply(),this._recordNudgeResult(Ls.BlockUser),a(),e({action:{label:$s,onAction:()=>{n(s.id_str).then((()=>{e({text:zs})})).catch(this._createApiErrorHandler())}},text:Ws})})).catch(this._createApiErrorHandler())})),o()(this,"_handleMuteUser",(()=>{const{addToast:e,mute:t,onDiscard:a,recipient:s,unmute:i}=this.props;this._recordNudgeAction(Hs.MuteUser),t(s.id_str).then((()=>{this._recordNudgeResult(Ls.MuteUser),a(),e({action:{label:Ms.a,onAction:()=>{i(s.id_str).then((()=>{e({text:Object(Os.d)(s.screen_name)})})).catch(this._createApiErrorHandler())}},text:Object(Os.b)(s.screen_name)})})).catch(this._createApiErrorHandler())})),o()(this,"_handleHideReplyThenBlock",(()=>{const{addFlag:e,shouldShowHideReplyTip:t,hidePopover:a,setShowBlockModal:s,setShowHideReplyEducation:i,showHideReplyEducation:n}=this.props;if(a(),n)i(!1);else if(t)return e(_s.d),void i(!0);s(!0)})),o()(this,"_handleHideReply",(()=>{const{addToast:e,conversationId:t,hideReply:a,inReplyToStatusId:s,updateDismissCause:i}=this.props;this._recordNudgeAction(Hs.HideReply),a(s,{conversation_id:t}).then((()=>{this._recordNudgeResult(Ls.HideReply),i&&i({entryId:`tweet-${s}`,feedbackKeys:[As.d]}),e({text:Gs})})).catch(this._createApiErrorHandler())})),o()(this,"_handleRevise",(()=>{const{onRevise:e}=this.props;this._recordNudgeAction(Hs.ReviseTweet),e()})),o()(this,"_handleCancelHideReplyEducation",(()=>{const{setShowHideReplyEducation:e}=this.props;e(!1),this._handleRevise()})),o()(this,"_handleBeforeWindowUnload",(()=>{this._recordNudgeAction(Hs.CloseApp),this._recordNudgeResult(Ls.CloseApp)})),o()(this,"_handleMoreInfo",(()=>{this.setState({showMoreInfo:!0})})),o()(this,"_hideMoreInfo",(()=>{this.setState({showMoreInfo:!1})})),o()(this,"_recordNudgeAction",(e=>{const{nudgeId:t,recordNudgeAction:a}=this.props;a({nudgeId:t,nudgeActionType:e})})),o()(this,"_recordNudgeResult",(e=>{const{nudgeId:t,recordNudgeResult:a}=this.props;a({nudgeId:t,nudgeResultType:e})})),o()(this,"_createApiErrorHandler",(()=>this.props.createLocalApiErrorHandler({showToast:!0})))}componentDidMount(){window.addEventListener("beforeunload",this._handleBeforeWindowUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this._handleBeforeWindowUnload)}render(){const{screenWidth:e,showBlockModal:t,showHideReplyEducation:a}=this.props,{showMoreInfo:s}=this.state;if(t)return this._renderBlockSheet();if(a)return r.createElement(Cs.a,{onCancel:this._handleCancelHideReplyEducation,onConfirm:this._handleHideReplyThenBlock});const i=e<S.a.theme.breakpoints.small;return this._isNudgeEducationEnabled?i?r.createElement(Ns.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:[ti.container,ti.smallBreakPointContainer,s&&ti.noPadding],type:"bottom",withMask:!0},s?r.createElement(Rs,{hideEducation:this._hideMoreInfo,isSmallBreakPoint:!0}):this._renderInnerBody()):r.createElement(r.Fragment,null,s&&r.createElement(Rs,{hideEducation:this._hideMoreInfo}),r.createElement(f.a,{style:ti.container},!s&&this._renderInnerBody())):r.createElement(Ns.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:ti.container,type:"center",withMask:!0},this._renderInnerBody())}}o()(ei,"contextType",pt.a);const ti=S.a.create((e=>({container:{alignItems:"center",backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.xLarge,padding:e.spaces.space20,paddingBottom:e.spaces.space12},smallBreakPointContainer:{borderRadius:e.borderRadii.none},noPadding:{padding:0},headlineText:{marginBottom:e.spaces.space12},buttons:{marginTop:e.spaces.space12,width:"100%"},button:{width:"100%",marginBottom:e.spaces.space16},moreInfoButton:{marginTop:e.spaces.space4},spinner:{marginTop:"5px"}})));var ai=bs(ei),si=a("OiMc"),ii=a("cHvH");class ni extends r.Component{constructor(...e){super(...e),o()(this,"state",{nudgeDismissed:!1,showBlockModal:!1,showHideReplyEducation:!1,shouldHidePopover:!1}),o()(this,"_isNudgeEducationEnabled",this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"_renderNudge",(()=>{const{location:e,inReplyToStatus:t,nudgeId:a,nudgeType:s,onDiscard:i,screenWidth:n}=this.props,{showBlockModal:o,showHideReplyEducation:l}=this.state,{featureSwitches:c}=this.context,d=null==t?void 0:t.conversation_id_str,h=e.state&&e.state.previousPath&&e.state.previousPath.split("/status/").slice(-1)[0].split("/")[0];return s&&a&&t&&t.id_str?r.createElement(ai,{conversationId:d,conversationModule:h&&this._getConversationModule(h,c),hidePopover:this._hidePopover,inReplyToStatusId:t.id_str,nudgeId:a,nudgeType:s,onDiscard:i,onRevise:this._handleDismissNudge,onSend:this._handleSend,recipient:t.user,screenWidth:n,setShowBlockModal:this.setShowBlockModal,setShowHideReplyEducation:this.setShowHideReplyEducation,showBlockModal:o,showHideReplyEducation:l}):null})),o()(this,"_getConversationModule",Object(me.a)(((e,t)=>Object(ms.a)({focalTweetId:e,featureSwitches:t})))),o()(this,"_handleSend",(()=>{const{onSend:e}=this.props;this._handleDismissNudge(),e()})),o()(this,"_handleDismissNudge",(e=>{const{clearNudgeType:t,nudgeType:a,screenWidth:s}=this.props;e&&e.stopPropagation(),this._isNudgeEducationEnabled&&s>=S.a.theme.breakpoints.small&&a&&this.setState({nudgeDismissed:!0}),t()})),o()(this,"_hidePopover",(()=>{this.setState({shouldHidePopover:!0})})),o()(this,"setShowHideReplyEducation",(e=>{this.setState({showHideReplyEducation:e})})),o()(this,"setShowBlockModal",(e=>{this.setState({showBlockModal:e})}))}render(){const{children:e,nudgeType:t,screenWidth:a}=this.props,{nudgeDismissed:s,shouldHidePopover:i}=this.state;return this._isNudgeEducationEnabled&&a>=S.a.theme.breakpoints.small&&!i?r.createElement(si.a,{disabled:s,onDismiss:this._handleDismissNudge,renderContent:this._renderNudge,visibilityBehavior:t?si.a.VISIBILITY_BEHAVIOR.forceVisible:si.a.VISIBILITY_BEHAVIOR.forceHidden,withArrow:!0,withFixedPosition:!0,withMask:!!t},e):r.createElement(r.Fragment,null,e,this._renderNudge())}}o()(ni,"contextType",pt.a);var oi=e=>r.createElement(ii.a,null,(({screenWidth:t})=>r.createElement(ni,i()({},e,{screenWidth:t})))),ri=a("7myi"),li=a("7nmT"),ci=a.n(li),di=a("vbWy"),hi=a("Rp9C"),ui=a("k49u");const pi=x.a.i859a9d3,mi=x.a.a7478929,gi=x.a.adf527d2,_i=x.a.b25c5b2a,yi=x.a.cc85b9f5,bi=x.a.a3f10d61,Ci=x.a.d74da9b8,fi=x.a.c3ebec63,Ti=x.a.b6266b34,wi=x.a.a59566d7,vi=x.a.g30d7ec5,Si=x.a.d484fca9,Ei=x.a.c51ba396,xi=x.a.ef2fa90b;var Ri={defaultToast:{text:gi},[ui.a.OverStatusUpdateLimit]:{toast:{text:mi,action:{label:pi,link:"https://support.twitter.com/articles/15364"}}},[ui.a.DuplicateStatusError]:{toast:{text:_i}},[ui.a.CurrentUserSuspended]:{toast:{text:yi}},[ui.a.InReplyToTweetNotFound]:{toast:{text:bi}},[ui.a.MentionLimitInTweetExceeded]:{toast:{text:Ci}},[ui.a.UrlLimitInTweetExceeded]:{toast:{text:fi}},[ui.a.HashtagLimitInTweetExceeded]:{toast:{text:Ti}},[ui.a.CashtagLimitInTweetExceeded]:{toast:{text:wi}},[ui.a.HashtagLengthLimitInTweetExceeded]:{toast:{text:vi}},[ui.a.AttachmentTypesLimitInTweetExceeded]:{toast:{text:Si}},[ui.a.StatusMalwareError]:{toast:{text:Ei,action:{label:pi,link:"https://support.twitter.com/articles/90491"}}},[ui.a.StatusTooLongError]:{toast:{text:xi}},showToast:!0},Ii=a("N5qz"),Ai="tweetButton",Mi="tweetButtonInline",ki=a("aITJ"),Di=a("sCk0"),Bi=a("4zmP"),Ni=a("0yYu"),Oi=a("JYMr"),Pi=a("rziq"),Hi=a("jTgF"),Li=a("3A2y"),Fi=a("s1N3"),Ui=a("4FGy"),Vi=a("+d3d"),ji=a("mN6z"),Wi=a("sXY3");const zi="Sorry, polls are not allowed in Communities!",$i=x.a.dad5a4b8,qi=x.a.e65aed64,Gi=x.a.d8222374,Ki=x.a.j890123a,Xi=x.a.bb01231c,Qi=x.a.d4ab68e2,Yi=x.a.d8af8a4c,Ji=x.a.d09d4c05,Zi=x.a.i2209530,en=x.a.bf9b89e4,tn=x.a.f277e949,an=x.a.b551cd22,sn=x.a.f026a7fa,nn=x.a.a5d4fda0,on=x.a.ib067d6a,rn=l.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,ln={component:"article_nudge"};class cn extends r.Component{constructor(e,t){super(e,t),o()(this,"_getParentKey",(()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?va.a.homeTimeline:va.a.modal)})),o()(this,"_updateSingleComposer",((e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})})),o()(this,"_resetDraft",(()=>{const{resetDraft:e}=this.props;return e(this._getParentKey())})),o()(this,"_syncTexts",(()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach(((e,a)=>{const s=t[e.key];"string"==typeof s&&s!==e.text&&this._updateSingleComposer({text:s},a)}))})),o()(this,"_hasGif",(e=>e.gifMetadata||e.media.some((e=>e.mediaFile&&e.mediaFile.isGif)))),o()(this,"_hasPhoto",(e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isImage)))),o()(this,"_hasVideo",(e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)))),o()(this,"_handleAnimateComplete",(()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=ci.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{top:e,bottom:s}=a.getBoundingClientRect(),i=Math.max(e,window.scrollY);if(i<window.pageYOffset||s>window.innerHeight){const e=t?i-t()-14:i-14,a=Math.max(e,0);window.requestAnimationFrame((()=>{rn?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)}))}}})),o()(this,"_handleFetchTweetIfNeeded",(()=>{const{createLocalApiErrorHandler:e,inReplyToStatus:t,inReplyToStatusId:a,fetchTweetIfNeeded:s,quotedStatus:i,quotedStatusId:n}=this.props;!t&&a&&s(a).catch(e(ds.a)),!i&&n&&s(n).catch(e(ds.a))})),o()(this,"_blockHistory",((e,t)=>{const{isInline:a}=this.props,s=!a&&/unsent/.test(e.pathname),i=!a&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&i?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&s&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:s}),!1):(this._resetDraft(),!0):!this.shouldShowBackgroundSendConfirmation||"POP"!==t||!i||(this._cancelAllMediaUploads(),!1)})),o()(this,"_getKeyCommandHandlers",(()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers})),o()(this,"handleTweetOrRetweet",(()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.isRetweet?this._handleRetweet():this._handleTweet()})),o()(this,"_render",(e=>{var t,a;const{activeUser:s,addComposer:n,addToast:o,composeHeader:l,composerData:c,conversationControlsValue:d,copyDataFromInlineComposerToModalComposer:h,customizePropsForSingleComposerItem:u,history:p,isModal:m,isInline:g,isSending:_,isSelfThreadReply:y,inReplyToStatus:b,location:C,parentTweetId:T,positionCursorAtBeginning:w,richTextInputContext:v,scheduledFor:E,selectedCommunityId:x,typeaheadWrapper:R,userLanguage:I,windowWidth:A}=this.props,{errorMessage:M,focused:k,nudgeId:B,nudgeType:N,showDiscardTweetConfirmation:O,typeaheadActive:P,shouldDisableButton:H}=this.state,L=!m&&P,F=g?0:this.props.activeComposerIndex,U=L||g?[c[F]]:c,V=this._areComposersValid(),j=this.hasNonCompliantQuote&&this.isRetweet,W=g?f.a:Di.a,z=g?{}:{onAnimateComplete:m?void 0:this._handleAnimateComplete},$=H||!V||j,q=g&&Ii.a.isOneColumnSquishedLayout(A)||this.isCommunityTweet;return r.createElement(f.a,{ref:e?this._setHiddenRootRef:this._setRootRef,style:[!T&&dn.root,e&&dn.hidden]},g?this._renderProgressBar():null,M&&r.createElement(f.a,{style:dn.inlineCallout},r.createElement(Bi.a,{action:null!=(t=M.action)&&t.label&&null!=(a=M.action)&&a.link?{label:M.action.label,link:M.action.link}:void 0,text:M.text,type:"danger"})),r.createElement(f.a,{onFocus:this._handleFocus,style:[dn.content,T&&dn.contentInlineReply,m&&dn.contentModal]},b?this._renderReplyContext(e):null,l,r.createElement(W,z,U.map(((t,a)=>{const l=Object(ue.h)(t.scheduledFor),T=c.indexOf(t),S=u(t,a,U),M=r.createElement(oi,{clearNudgeType:this.clearNudgeType,inReplyToStatus:b,location:C,nudgeId:B,nudgeType:N,onDiscard:this._handleDismissComposerFromNudge,onSend:this._handleSendTweet},m||g?r.createElement(D.a,{disabled:$,onPress:this.handleTweetOrRetweet,size:"normal",style:dn.inlineSendButton,testID:m?Ai:Mi,type:"primary"},Object(hs.a)({inReplyToStatus:!!b,isSelfThreadReply:!!y,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!l,isThread:this.isThread})):null),O=this._getSingleComposerDataWithLatestText(t);return r.createElement(f.a,{key:t.key},r.createElement(na,i()({addToast:o,additionalToolbarContent:M,autoFocus:!e&&this.isInlineReply&&k,conversationControlsValue:d,data:O,disableAddTweet:c.length>=25,editable:!_&&!!s,hidePollAndScheduling:q,history:p,index:T,isActive:T===F&&!_,isExpanded:0!==a||this._shouldBeExpanded(e),isInline:g,isInlineReply:this.isInlineReply,isLast:g||T===c.length-1,isReply:!!b||this.isInlineReply,isSelfThreadReply:!!y,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:s,onAddComposer:g?h:n,onFilesAdded:this._handleAddMediaFiles(T),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(O.key,a),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!w,ref:this._setComposerRef(T),richTextInputContext:v,scheduledFor:E,selectedCommunityId:x,setActiveParentKey:this._setActiveParentKey,twitterTextConfigurationVersion:"version3",typeaheadActive:P,typeaheadWrapper:R,updateCommunityValue:this._updateCommunityValue,updateConversationControlsValue:this._updateConversationControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:I,windowWidth:A},S)))}))),O?this._canSaveDraft?r.createElement(Bs.a,{cancelButtonLabel:Qi,confirmButtonLabel:Zi,headline:Yi,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:Ji}):r.createElement(Bs.a,{confirmButtonLabel:Qi,confirmButtonType:"destructive",headline:this.isThread?Ki:Gi,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:Xi}):null,r.createElement(f.a,{style:[_&&dn.mask]})),!S.a.isVdlRefreshEnabled()&&T&&r.createElement(Ni.a,{withBottomBorder:!1}))})),o()(this,"_renderReplyContext",(e=>{const{activeUser:t,excludedRecipients:a,isInline:s,isSelfThreadReply:i,inReplyToStatus:n,selectedCommunityName:o}=this.props;if(n&&this._shouldBeExpanded(e))return r.createElement(ba,{communityName:o,excludedRecipients:a,inReplyToStatus:n,key:a.join(),loggedInUserId:t?t.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!i,showParentTweet:!s})})),o()(this,"_setRootRef",(e=>{e&&(this._root=e)})),o()(this,"_setHiddenRootRef",(e=>{e&&(this._hiddenExpandedRoot=e)})),o()(this,"_handleTweet",(()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(ue.h)(t)&&this._handleScheduleTweet():this._checkToxicAndSendTweet()})),o()(this,"_handleTweetError",((e,t)=>a=>{const{analytics:s,createLocalApiErrorHandler:i}=this.props;if(Object(Hi.d)(a)&&a.code===us.b.CANCELED)return s.scribeAction(e),Promise.resolve();const n=Object(Hi.b)(a);if(n)return this.setState({errorMessage:n}),Promise.resolve();i({...t||Object(ls.a)(void 0,!1)})(a),this.setState({errorMessage:{text:nn}})})),o()(this,"_handleScheduleTweet",(()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:s,schedule:i}=this.props,n=this._getSingleComposerDataWithLatestText(t[0]);i({excludedRecipients:a,inReplyToStatus:s,scheduleData:n}).then((a=>{this.setState({tweetsSentOrScheduled:!0});const s=Object(ue.c)(n.scheduledFor);if(s){const i=Object(ue.b)(s),n=Object(ue.i)(s),o=an({scheduleDate:i,scheduleTime:n});e({text:o,action:{label:tn,link:"/compose/tweet/unsent/scheduled"}}),this._scribeTweetSent(t[0],{...a,id_str:a.scheduled_id_str},{isScheduled:!0})}this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("schedule_tweet_cancel"))})),o()(this,"_handleDraftTweet",(()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:s,inReplyToStatus:i}=this.props,n=this._getSingleComposerDataWithLatestText(t[0]);this._recordNudgeResult(Ls.SaveTweetToDrafts),a({excludedRecipients:s,inReplyToStatus:i,draftData:n}).then((a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:en,action:{label:tn,link:"/compose/tweet/unsent/drafts"}}),this._scribeTweetSent(t[0],{...a,id_str:a.draft_id_str},{isDraftTweet:!0}),this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("draft_tweet_cancel"))})),o()(this,"_handleSendTweet",(()=>{const{addToast:e,analytics:t,conversationControlsValue:a,composeSemanticCoreId:s,excludedRecipients:i,hasArticleNudge:n,history:o,inReplyToStatus:r,isSelfThreadReply:l,location:d,activeUser:h,selectedCommunityId:u,selectedCommunityName:p,promotedContent:m,send:g}=this.props,{nudgeId:_}=this.state,y=this.props.composerData.map((e=>this._getSingleComposerDataWithLatestText(e))),b=Object(ue.c)(y[0].scheduledFor);if(b){const t=Object(ue.b)(b),a=Object(ue.i)(b),s=an({scheduleDate:t,scheduleTime:a});return e({text:s,action:{label:tn,link:""}}),void this._close()}if(i.length>0&&t.scribe({element:"mentions",action:"edited"}),this._conversationControlsCreationEnabled)if("community"===a)t.scribe({action:"send_community_tweet"});else if("by_invitation"===a){const e=this._getSingleComposerDataWithLatestText(y[0]).text,a=Object(c.d)(e);t.scribe({action:a?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"})}else"followers"===a&&t.scribe({action:"send_my_followers_tweet"});const C=y.map(((e,t)=>({...e,pollChoices:this._composerRefs[t]?this._composerRefs[t].pollChoices:void 0,pollDuration:this._composerRefs[t]?this._composerRefs[t].pollDuration:void 0}))),f=this._isNudgeTweetypieEnabled&&this._isSecondaryDegreeNudge?{nudge_enabled:!0,nudge_types:["ReviseOrBlock","ReviseOrMute","ReviseOrHideThenBlock"],nudge_testing_keyword_enabled:!0,previous_nudge_id:_}:{},T=(null==r?void 0:r.community_id_str)||u,w=T?`8.31.${T}`:"",v=s?T?[s,w].join(","):s:w,S=!!this.context.userClaims&&this.context.userClaims.isTrueAndEnabled("subscriptions_feature_1003");g({...f,sendData:C,communityValue:T,conversationControlsValue:a,excludedRecipients:i,inReplyToStatus:r,isSelfThreadReply:l,promotedContent:m,composeSemanticCoreId:v,isPreview:S}).then((t=>{if(this.setState({tweetsSentOrScheduled:!0}),t.map(((e,t)=>this._scribeTweetSent(y[t],e,{hasArticleNudge:n}))),t.length>1&&this._scribeThreadSent(y,t,"thread_send_success"),!S){let s=t.length>1?qi:$i;T&&p&&(a=p,s=t.length>1?`Your Tweets were sent to ${a}.`:`Your Tweet was sent to ${a}.`),e({text:s,action:{label:tn,link:`/${h?h.screen_name:"i"}/status/${t[0].id_str}`}})}var a;if(this._isNudgeEnabled&&_){const e=t[0].id_str;this._isShowNudgeEnabled?this._recordNudgeResult(Ls.SentTweet,e):this._recordNudgeResult(Ls.TweetSentWithoutShowingNudge,e)}this.isInlineReply&&this.setState({focused:!1}),this._updateConvoCardState(),this._close()})).catch((e=>{var a;const{sentTweets:s=[]}=e,i=Array.isArray(e.errors)&&(null==(a=e.errors[0])?void 0:a.code),r=null==e?void 0:e.url,l=null==e?void 0:e.status,c={message:e.type,event_info:i?`${i}`:void 0,status_code:l,url:r};if(!this._isNudgeTweetypieEnabled||439!==i)throw s.map(((e,t)=>this._scribeTweetSent(y[t],e)),{hasArticleNudge:n}),Object(Hi.d)(e)&&e.code===us.b.CANCELED||t.scribe({action:"send_tweet_failure",data:c}),y.length>1&&this._scribeThreadSent(y,s,"thread_send_failure"),s.length&&o.replace({pathname:d.pathname,state:{...Object(Li.a)(d.state||{},"quotedStatus"),inReplyToStatusId:s[s.length-1].id_str,isSelfThreadReply:!0}}),e;{var h;const t=null==(h=e.errors[0])?void 0:h.nudge,a=t.id,s=t.nudge_type,i=s.charAt(0).toUpperCase()+s.slice(1);this.setState({nudgeType:i,nudgeId:a})}})).catch(this._handleTweetError("send_tweet_cancel",Ri))})),o()(this,"_checkToxicAndSendTweet",(()=>{var e,t;const{activeUser:a,composerData:s,createNudge:i,inReplyToStatus:n,isSelfThreadReply:o}=this.props,{hasNudged:r}=this.state,l=null==n||null==(e=n.entities)||null==(t=e.user_mentions)?void 0:t.some((({screen_name:e})=>e===(null==a?void 0:a.screen_name))),c=this._getSingleComposerDataWithLatestText(s[0]).text;this._isSecondaryDegreeNudge=!(o||!l||!i||!c),!this._isNudgeTweetypieEnabled&&this._isNudgeEnabled&&!r&&this._isSecondaryDegreeNudge?(this.setState({shouldDisableButton:!0}),this._checkToxicWithTimeout(c).then((e=>{e.showNudge||this._handleSendTweet()})).finally((()=>{this.setState({shouldDisableButton:!1})}))):this._handleSendTweet()})),o()(this,"_makeTimeout",(()=>new Promise(((e,t)=>setTimeout(e,1500))))),o()(this,"_checkToxicWithTimeout",(e=>{const{inReplyToStatus:t,location:a}=this.props;return Promise.race([this._checkToxic(e),this._makeTimeout()]).then((e=>{var s,i,n,o,r;const l=null==e||null==(s=e.create_nudge)||null==(i=s.nudge)||null==(n=i.nudge_type)?void 0:n.__typename,c=null==e||null==(o=e.create_nudge)||null==(r=o.nudge)?void 0:r.id;this.setState({nudgeId:c});const d=null==t?void 0:t.user.muting,h=l===Ps.ReviseOrMute&&d,u=a.state&&a.state.previousPath.includes("/hidden"),p=l===Ps.ReviseOrHideThenBlock&&u;if(l){if(this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_show_enabled"),this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled&&!h&&!p)return this.setState({nudgeType:l,hasNudged:!0}),{showNudge:!0};this._recordNudgeAction(Hs.NudgeNotShown)}return{}})).catch((()=>({})))})),o()(this,"_checkToxic",(e=>{const{createNudge:t,inReplyToStatusId:a,parentTweetId:s=a,inReplyToStatus:i}=this.props;return t(e,s,null==i?void 0:i.conversation_id_str)})),o()(this,"clearNudgeType",(()=>{this.setState({nudgeType:void 0})})),o()(this,"_setActiveParentKey",(()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())})),o()(this,"_scribeTweetSent",((e,t,{isScheduled:a=!1,isDraftTweet:s=!1,hasArticleNudge:i=!1}={})=>{const n=e.scheduledTweetId?"schedule_edit_":"schedule_",o=e.draftTweetId?"draft_edit_":"draft_",r=s?o:a?n:"send_",l={items:[hi.a.getTweetItem(t)]},c=e.pollActive&&e.pollValid,d=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.altText)})),h=this.props.inReplyToStatus||this.props.inReplyToStatusId,u=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:`${r}tweet`},l),s||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:`${r}draft_tweet`},l),this.isQuoteTweet&&(this._scribe({action:"retweet_with_comment"},l),i&&this._scribe({...ln,element:"result",action:"retweet_with_comment"},l)),h&&this._scribe({component:u,action:`${r}reply`},l),c&&this._scribe({action:`${r}poll_tweet`},l),this._hasPhoto(e)&&(this._scribe({action:`${r}photo_tweet`},l),d&&this._scribe({action:`${r}photo_tweet_with_alt_text`},l)),this._hasVideo(e)&&this._scribe({action:`${r}video_tweet`},l),e.gifMetadata){const a=t.id_str&&hi.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:`${r}gif_tweet`},{items:a?[a]:[]});const s=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.defaultAltText)}));(d||s)&&this._scribe({element:"remote",action:`${r}gif_tweet_with_alt_text`},{event_info:d?"user_entered":"from_provider",items:a?[a]:[]})}else this._hasGif(e)&&(this._scribe({element:"local",action:`${r}gif_tweet`},l),d&&this._scribe({element:"local",action:`${r}gif_tweet_with_alt_text`},l))})),o()(this,"_scribeThreadSent",((e,t,a)=>{const{inReplyToStatus:s}=this.props,i={items:[hi.a.getSendThreadItem(e,t.length,!!s)]};this._scribe({action:a},i)})),o()(this,"_scribeRetweet",(e=>{const{hasArticleNudge:t}=this.props,a={items:[hi.a.getTweetItem(e)]};this._scribe({action:"retweet"},a),t&&this._scribe({...ln,element:"result",action:"retweet"},a)})),o()(this,"_handleRetweet",(()=>{const{composerData:e,createLocalApiErrorHandler:t,retweet:a}=this.props,s=e[0].quotedStatus;s&&(this._scribeRetweet(s),a(s.id_str,{}).then((e=>{this.setState({tweetsSentOrScheduled:!0}),this._close()}),t(di.a)))})),o()(this,"handleDismissComposer",(()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()})),o()(this,"_handleDismissComposerFromNudge",(()=>{this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()})),o()(this,"_cancelAllMediaUploads",(()=>{this.props.composerData.forEach((e=>e.media.forEach((e=>e.uploading&&e.uploader&&e.uploader.cancel()))))})),o()(this,"_handleConfirmDiscardTweet",(()=>{const{analytics:e,hasArticleNudge:t}=this.props,a=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._recordNudgeResult(Ls.CancelComposer),this._close(),e.scribeAction(`${a}_tweet_discard`),t&&this._scribe({...ln,element:"result",action:"cancel"})})),o()(this,"_handleCancelDiscardTweet",(()=>{this.setState({showDiscardTweetConfirmation:!1},(()=>{this._restoreFocusToActiveComposer()}))})),o()(this,"_restoreFocusToActiveComposer",(()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()})),o()(this,"_close",(()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||this._resetDraft(),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()})),o()(this,"_handleComposerFocus",(e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout((()=>{this._restoreFocusToActiveComposer()}),0)})),o()(this,"_handleFocus",(()=>{const{getTweetHeight:e}=this.props,{focused:t}=this.state;t||(this.isInlineReply&&this._scribe({element:"inline_reply",action:"reply"}),this.setState({focused:!0},(()=>{if(e&&this._hiddenExpandedRoot){const t=this._hiddenExpandedRoot.getBoundingClientRect().height+e();this._handleHeightChanged(t)}})))})),o()(this,"_handleHeightChanged",(e=>{const{onHeightChanged:t,onAnimationStarted:a,onAnimationEnded:s}=this.props;a&&a("none"),t&&t(e),window.requestAnimationFrame((()=>{s&&s()}))})),o()(this,"_handleTypeaheadStateChange",(e=>{this.setState({typeaheadActive:e})})),o()(this,"_handleRemoveComposer",(()=>{const{activeComposerIndex:e,composerData:t,history:a,location:s,removeComposer:i}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:s.pathname,state:Object(Li.a)(s.state||{},"quotedStatus")}),i(),setTimeout(this._restoreFocusToActiveComposer)})),o()(this,"_handleViewRecipients",(()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})})),o()(this,"_handleTextChange",((e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:s,isInline:i,setValidity:n}=this.props;if(this.setState({textMap:{...a,[t]:e}},(()=>{n&&n(this._areComposersValid())})),ki.b.isIOS()){const t=i?0:s;this._updateSingleComposer({text:e},t)}})),o()(this,"_handleTextOnBlur",Object(me.a)(((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:s}=this.state,{composerData:i}=this.props,n=a[e],o=i.some((t=>t.key===e));"string"==typeof n&&!s&&o&&this._updateSingleComposer({text:n},t)}))),o()(this,"_updateConversationControlsValue",(e=>{if(!this._conversationControlsCreationEnabled)return;const{updateConversationControlsValue:t}=this.props;t(e,this._getParentKey())})),o()(this,"_updateCommunityValue",(e=>{const{composerData:t,updateCommunityValue:a,selectedCommunityIdFromLocationState:s,location:i,history:n}=this.props,{errorMessage:o}=this.state;this._isCommunitiesEnabled&&(s&&n.replace({pathname:i.pathname,state:Object(Li.a)(i.state||{},"selectedCommunityId")}),t[0].pollActive&&e&&(this._updateSingleComposer({pollActive:!1},0),this.setState({errorMessage:{text:zi}})),(null==o?void 0:o.text)===zi&&this.setState({errorMessage:void 0}),a(e))})),o()(this,"_renderProgressBar",(()=>{const{sendingProgress:e,isSending:t}=this.props;return r.createElement(Oi.a,{progress:t?Math.max(e,.02):0,style:[dn.progressBar]})})),o()(this,"_updateConvoCardState",(()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:s}=e;s&&a&&t(a,{cardState:s})}})),o()(this,"_attachExternalMedia",(e=>t=>Promise.all(t.map((e=>Object(cs.a)(e)))).then(this._handleAddMediaFiles(e)))),o()(this,"_handleAddMediaFiles",(e=>t=>{const{addMedia:a,addToast:s,composerData:i,dataSaverMode:n,processMultipleMedia:o,removeMediaUpload:r,uploadMedia:l}=this.props;a(t,{location:ps.d.Tweet}).then((t=>{const a=i[e],c=t.map((e=>e.id));if(cn._validateMedia(a,t)){const s=a.media.map((e=>e.id));this._updateSingleComposer({mediaIds:Object(Fi.a)(s.concat(c))},e),o(t,{onFailure:this._handleMediaRemoveFactory(e)}).then((e=>{n||l(e.map((e=>e.id)),{preUpload:!0})}))}else s({text:on}),r(c)}))})),o()(this,"_handleMediaRemoveFactory",(e=>t=>this._handleMediaRemove(e,t))),o()(this,"_handleMediaRemove",((e,t)=>{const{composerData:a,removeMediaUpload:s}=this.props,{media:i,mediaTags:n}=a[e],o=((e,...t)=>Object(Ui.a)(e,t))(i.map((e=>e.id)),t),r=o.length>0?n:[];this._updateSingleComposer({mediaIds:o,gifMetadata:void 0,mediaTags:r},e),s(t),this.setState({errorMessage:void 0})})),o()(this,"_setComposerRef",(e=>t=>{this._composerRefs[e]=t})),o()(this,"_shouldBeExpanded",(e=>{const{composerData:t,parentTweetId:a}=this.props,{focused:s}=this.state;if(e||s)return!0;const i=!Object(he.b)(this._getSingleComposerDataWithLatestText(t[0]));return!a||i})),o()(this,"_areComposersValid",(()=>{const{composerData:e}=this.props,t=e[0].quotedStatus,a=t&&t.community_id_str;return this.isRetweet&&!a||e.every((e=>Object(he.d)(this._getSingleComposerDataWithLatestText(e))))})),o()(this,"_areComposersEmptyOrUnchanged",(()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every((e=>Object(he.c)(this._getSingleComposerDataWithLatestText(e),t)))})),o()(this,"_getSingleComposerDataWithLatestText",(e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?{...e,text:t[e.key]}:e})),o()(this,"_recordNudgeAction",(e=>{const{recordNudgeAction:t}=this.props,{nudgeId:a}=this.state;a&&t({nudgeId:a,nudgeActionType:e})})),o()(this,"_recordNudgeResult",((e,t)=>{const{recordNudgeResult:a}=this.props,{nudgeId:s}=this.state;s&&a(t?{nudgeId:s,nudgeResultType:e,tweetId:t}:{nudgeId:s,nudgeResultType:e})})),this.state={focused:!1,showDiscardTweetConfirmation:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._throttledSyncTexts=Object(Vi.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[Pi.b]:this.handleTweetOrRetweet,[Pi.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[Pi.b]:this.handleTweetOrRetweet},this._isNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_show_enabled"),this._isNudgeTweetypieEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_tweetypie_enabled"),this._isCommunitiesEnabled=this.context.featureSwitches.isTrue("c9s_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){const{convoCardData:e,externalMedia:t,externalMediaFiles:a,history:s,isIntentRoute:i,isInline:n,location:o,prepopulatedText:r,setValidity:l}=this.props;if(this._unblockHistory=this.props.history.block(this._blockHistory),t.length>0&&this._attachExternalMedia(0)(t),a.length>0&&this._handleAddMediaFiles(0)(a),this._handleFetchTweetIfNeeded(),r||e&&e.cardUrl){const t={};r&&(t.text=r),e&&e.cardUrl&&(t.cardUrl=e.cardUrl),this._updateSingleComposer(t)}(r||e&&e.cardUrl||t.length>0||a.length>0)&&!i&&s.replace({query:Object(wa.b)(o.query),search:"",pathname:o.pathname,state:Object(Li.a)(Object(wa.b)(o.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),l&&l(this._areComposersValid()),n||this._setActiveParentKey(),this.isInlineReply&&this._root&&(this._height=this._root.getBoundingClientRect().height)}componentDidUpdate(e,t){const{addToast:a,composerData:s,copyDataFromInlineReplyComposerToModalComposer:i,externalMedia:n,externalMediaFiles:o,onRef:r,parentTweetId:l,replyPressToggle:c,setValidity:d,windowWidth:h,getTweetHeight:u}=this.props,{textMap:p}=this.state;if(this.isInlineReply&&u&&this._root&&(e.composerData!==s||t.textMap!==p)){const e=this._root.getBoundingClientRect().height;if(e!==this._height){this._height=e;const t=e+u();this._handleHeightChanged(t)}}h!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this),s.length>=25&&e.composerData.length<25&&a({text:sn}),n.length>0&&n!==e.externalMedia?this._attachExternalMedia(0)(n):o.length>0&&o!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(o),d&&!Object(ji.a)(s,e.composerData)&&d&&d(this._areComposersValid()),c!==e.replyPressToggle&&i(l)}componentWillUnmount(){const{composerData:e,onRef:t}=this.props;this._unblockHistory&&this._unblockHistory(),t&&t(void 0),Object(Wi.a)(this._composerRefs).forEach((([t,a])=>{const s=parseInt(t,10);if(a)return e[s]&&e[s].pollActive&&this._updateSingleComposer({initialPollChoices:a.pollChoices,initialPollDuration:a.pollDuration},s)})),this._syncTexts()}render(){const{parentTweetId:e}=this.props;return e?r.createElement(r.Fragment,null,this._render(!0),this._render()):this._render()}_scribe(e,t){const{analytics:a}=this.props;a.scribe({...e,data:t})}get isInlineReply(){const{parentTweetId:e}=this.props;return!!e}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{isSending:e,composerData:t}=this.props,{scheduledTweetId:a}=t[0],{showDiscardTweetConfirmation:s}=this.state,i=this._areComposersEmptyOrUnchanged();return!(e||i||s||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some((e=>e.media.some((e=>e.uploading))));return t&&a}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!(this.isCommunityTweet||this.isThread||e[0].pollActive||0!==e[0].mediaTags.length||t)}get isCommunityTweet(){const{inReplyToStatus:e,selectedCommunityId:t}=this.props;return!!(null!=e&&e.community_id_str||t)}}o()(cn,"defaultProps",{customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:ri.a}),o()(cn,"contextType",pt.a),o()(cn,"_validateMedia",((e,t)=>{const{media:a}=e;return Object(c.c)(a.concat(t))}));const dn=S.a.create((e=>({root:{paddingBottom:e.spaces.space4},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:{...S.a.absoluteFillObject},inlineSendButton:{marginLeft:e.spaces.space12},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}})));t.a=Object(q.a)(rs(cn))},VjLy:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var s=a("ERkP"),i=a("xZGM"),n=a("3XMw"),o=a.n(n),r=a("feu+"),l=a("eb3s"),c=a("lUZE"),d=a("5cUs");const h=o.a.ge5067bb,u=o.a.ea626ab3,p=o.a.fc716886,m=`${o.a.f2a2a06e}\n\n${o.a.f82c0bbf}`,g=o.a.b2615c6d,_=o.a.i62a03aa,y=o.a.cfd2f35d,b=o.a.a6450e83,C=o.a.hb279a11,f=({onConfirm:e,onCancel:t,onHideReplyImpression:a=(()=>{})})=>s.createElement(r.a,{actionLabel:h,graphic:c.a,headline:p,onAction:e,onClose:t,onImpression:a,onTertiaryAction:t,subtext:m,supportUrl:"https://help.twitter.com/en/using-twitter/mentions-and-replies?lang=browser#hidden-reply",tertiaryActionLabel:y});t.b=({addFlag:e,addToast:t,clientEventEntityToken:a,createLocalApiErrorHandler:n,hideReply:o,onBlock:r,onTweetDismiss:c,scribeAction:p,shouldShowHideReplyTip:m,tweet:y})=>{const T=()=>{p({element:"moderated_replies_prompt",action:"impression"})};return{confirmation:m?{render:(e,t)=>f({onConfirm:e,onCancel:t,onHideReplyImpression:T})}:{render:(e,t)=>{const{user:{screen_name:a}}=y;return s.createElement(l.a,{cancelButtonLabel:_,confirmButtonLabel:b,confirmButtonType:"destructive",headline:g({screenName:a}),onCancel:e,onConfirm:()=>{r(),e()},text:C({screenName:a})})}},text:h,onClick:()=>{e(i.d),o(y.id_str,{conversation_id:y.conversation_id_str}).then((e=>{c&&c(),t({text:u,clientEventEntityToken:a})}),n({showToast:!0})),p({element:"moderate_reply"})},Icon:d.a}}},WOwf:function(e,t,a){"use strict";function s(e,t){return Math.min(1,1-e/t)}a.d(t,"a",(function(){return s}))},XpKj:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return _}));var s=a("oEOe"),i=a("kGix"),n=a("Ssj5");const o="scheduledTweets",r={fetchStatus:i.a.NONE,scheduledTweets:[]},l="FETCH_SCHEDULED_TWEETS",c=Object.freeze({REQUEST:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_REQUEST",SUCCESS:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_SUCCESS",FAILURE:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_FAILURE"}),d="DELETE_SCHEDULED_TWEET",h=Object.freeze({REQUEST:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_REQUEST",SUCCESS:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_SUCCESS",FAILURE:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_FAILURE"});function u(e=r,t){switch(t.type){case c.SUCCESS:if(t.payload)return{...e,fetchStatus:i.a.LOADED,scheduledTweets:t.payload};break;case c.FAILURE:return{...e,fetchStatus:i.a.FAILED};case c.REQUEST:return{...e,fetchStatus:i.a.LOADING};case h.SUCCESS:{const{meta:i}=t;return i&&i.deleteScheduledTweetId?{...e,scheduledTweets:(a=i.deleteScheduledTweetId,s=e.scheduledTweets,s.filter((e=>e.rest_id!==a)))}:e}default:return e}var a,s;return e}n.a.register({[o]:u});const p=e=>e.scheduledTweets.scheduledTweets,m=e=>e.scheduledTweets.fetchStatus,g=()=>(e,t,{api:a})=>Object(s.b)(e,{request:a.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:c,context:l}).then((()=>{})),_=e=>(t,a,{api:i})=>Object(s.b)(t,{request:i.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:h,context:d,meta:{deleteScheduledTweetId:e}})},Zg3A:function(e,t,a){"use strict";var s=a("ERkP"),i=a("Lsrn"),n=a("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[i.a.root,e.style],viewBox:"0 0 24 24"},s.createElement("g",null,s.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm8.472 9.442c-.242.19-.472.368-.63.486-.68-1.265-1.002-1.78-1.256-2.007-.163-.145-.37-.223-.78-.375-.367-.136-1.482-.55-1.65-.85-.087-.153.136-.602.23-.793.088-.177.164-.33.196-.497.123-.646-.33-1.146-.728-1.59-.066-.072-.153-.17-.23-.26.335-.12.862-.26 1.42-.384 1.95 1.448 3.26 3.704 3.428 6.272zm-9.788-7.83c.076.25.145.5.182.678-.255.15-.663.363-.96.52-.262.136-.522.273-.738.392-.247.137-.442.234-.6.313-.347.174-.598.3-.833.553-.068.073-.26.278-1.02 1.886l-1.79-.656c1.293-1.94 3.362-3.31 5.76-3.685zM12 20.5c-4.687 0-8.5-3.813-8.5-8.5 0-1.197.25-2.335.7-3.37.47.182 1.713.66 2.75 1.035-.107.336-.245.854-.26 1.333-.03.855.502 1.7.562 1.792.053.08.12.15.2.207.303.21.687.5.827.616.063.343.166 1.26.23 1.833.144 1.266.175 1.48.24 1.65.005.012.514 1.188 1.315 1.188.576-.003.673-.206 1.855-2.688.244-.512.45-.95.513-1.058.1-.144.597-.61.87-.83.55-.442.76-1.82.413-2.682-.335-.83-1.92-2.08-2.5-2.195-.17-.033-.43-.04-.953-.053-.497-.01-1.25-.028-1.536-.09-.098-.024-.314-.094-.605-.196.32-.668.627-1.28.71-1.4.05-.052.168-.112.408-.234.17-.086.383-.192.653-.34.208-.116.458-.247.71-.38 1.168-.612 1.484-.8 1.658-1.082.11-.177.263-.44-.04-1.544 1.042.027 2.038.24 2.955.61-.89.32-1.024.595-1.106.77-.367.784.256 1.475.667 1.93.096.107.24.268.32.38l-.017.036c-.234.472-.67 1.35-.196 2.194.406.72 1.384 1.13 2.437 1.52.134.05.25.092.33.126.16.208.496.79 1 1.735l.154.285c.078.14.33.505.842.505.167 0 .363-.04.59-.137.032-.013.083-.035.18-.094C19.72 17.405 16.22 20.5 12 20.5zm-3.812-9.45c.01-.285.102-.646.184-.907l.027.006c.397.09 1.037.11 1.83.13.32.006.59.008.615 0 .326.143 1.355 1 1.483 1.31.113.28.05.812-.034 1.01-.233.197-.845.735-1.085 1.078-.093.13-.212.373-.64 1.274-.133.276-.313.654-.488 1.013-.026-.225-.054-.472-.08-.686-.225-2.003-.273-2.22-.42-2.445-.05-.078-.202-.31-1.135-.973-.117-.213-.268-.564-.26-.813z"})));o.metadata={width:24,height:24},t.a=o},pcjM:function(e,t,a){"use strict";a.r(t),a.d(t,"Compose",(function(){return we}));var s=a("97Jx"),i=a.n(s),n=a("KEM+"),o=a.n(n),r=(a("kYxP"),a("ERkP")),l=a("HPNB"),c=(a("VAZu"),a("Ub51")),d=a("zh9S"),h=a("ge3j"),u=a("pidX"),p=a("0KEI"),m=a("AspN"),g=a("XOJV"),_=a("G6rE"),y=a("hqKg"),b=a("oEGd"),C=a("rU/Q"),f=a("XpKj");const T=e=>(t,a)=>{const s=((e,t)=>t.location.state)(0,a);return s?e(s):void 0},w=Object(y.createSelector)(((e,t)=>t.activeUser),_.e.selectLoggedInUser,((e,t)=>e||t)),v=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},S=T((e=>e.inReplyToStatusId)),E=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,x=T((e=>e.defaultText)),R=T((e=>e.quotedStatus)),I=({mediaIds:e,cardUrl:t,...a})=>a,A=T((e=>e.isSelfThreadReply)),M=T((e=>e.hideUnsentTweetsButton)),k=T((e=>e.headingSubtitle)),D=T((e=>e.headingTitle)),B=Object(y.createSelector)((e=>h.m(e,"")),((e,t)=>{const a=x(e,t);return Object(u.a)(t.location)||a}),((e,t)=>t.quotedStatus?t.quotedStatus:R(e,t)),m.i,E,((e,t,a,s,i)=>e.map(((e,n)=>({...I(e),media:s.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===n?a:void 0,text:0===n&&t&&!i?t:e.text}))))),N=Object(y.createStructuredSelector)({activeUser:w,composerData:B,draftTweets:C.e,inReplyToStatus:(e,t)=>{const a=v(0,t)||S(e,t);return a?g.a.selectHydrated(e,a):void 0},inReplyToStatusId:v,isIntentRoute:E,isSelfThreadReply:A,isSending:e=>h.p(e,""),scheduledTweets:f.f,sendingProgress:h.r,composeSemanticCoreId:T((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:M,subtitle:k,title:D}),O={createDraftTweetApiErrorHandler:Object(p.d)(C.d),createScheduledTweetApiErrorHandler:Object(p.d)(f.d),googleAnalyticsPageView:d.a,scribePageImpression:d.d,fetchScheduledTweets:f.c,fetchDraftTweets:C.c};var P=Object(b.g)(N,O),H=a("RgK2"),L=a.n(H),F=a("jHSc"),U=a("MXY2"),V=a("3XMw"),j=a.n(V),W=a("iFPY"),z=a("QbaN"),$=a("oQhu"),q=a("v6aA"),G=a("rxPX"),K=a("xZGM");const X=e=>Object(K.k)(e,K.g);var Q=Object(G.a)().propsFromState((()=>({shouldShowNewsletterCallout:X}))).propsFromActions((()=>({addFlag:K.i}))),Y=a("Lsrn"),J=a("k/Ka");const Z=(e={})=>Object(J.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Y.a.root,e.style],viewBox:"0 0 32 32"},r.createElement("g",null,r.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),r.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));Z.metadata={width:32,height:32};var ee=Z,te=a("MWbm"),ae=a("t62R"),se=a("4zmP"),ie=a("rHpw");const ne=j.a.ed33a3b6,oe=ie.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var re=Q((({addFlag:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:a}=r.useContext(q.a),s=a.isTrue("responsive_web_newsletters_callout_enabled"),i=t&&s,n=r.createElement(j.a.I18NFormatMessage,{$i18n:"dd9ea7de"},r.createElement(ae.c,{link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},j.a.jea718ec));return i?r.createElement(te.a,{style:oe.revueCallout},r.createElement(se.a,{Icon:ee,headline:ne,onClose:()=>{e(K.g)},text:n,withCloseButton:!0})):null})),le=a("7nmT"),ce=a.n(le),de=a("Dtul"),he=a("7JQg"),ue="tweetButton",pe=a("/yvb"),me=a("JYMr"),ge=a("cHvH"),_e=a("7N4s");const ye=j.a.b8f0483e,be=j.a.a133d13e,Ce={page:"compose"},fe={page:"compose",section:"reply"},Te={context:"compose_intent_logged_in"};class we extends r.Component{constructor(...e){super(...e),o()(this,"state",{isValid:!1}),o()(this,"_handleAppBarHeight",Object($.a)((()=>{const e=ce.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50}))),o()(this,"_handleBackClick",(()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()})),o()(this,"_handleCloseComposer",(()=>{this._appBarRef&&this._appBarRef.goBack()})),o()(this,"_handleSendTweet",(()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()})),o()(this,"_setValidity",(e=>{e!==this.state.isValid&&this.setState({isValid:e})})),o()(this,"_getScribeNamespace",(()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?fe:Ce)),o()(this,"_getScribeData",(()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?Te:L.a})),o()(this,"_renderAppBarRightControl",(()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{inReplyToStatus:a,isSelfThreadReply:s,isSending:i,activeUser:n}=this.props,o=!e||i||!n;return t?void 0:r.createElement(pe.a,{disabled:o,onPress:this._handleSendTweet,size:"normalCompact",testID:ue,type:"primary"},Object(U.a)({inReplyToStatus:!!a,isSelfThreadReply:!!s,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread}))})),o()(this,"_renderHeaderWithProgressBar",(e=>{const{isModal:t}=this.context,{sendingProgress:a,isSending:s}=this.props;return r.createElement(r.Fragment,null,r.createElement(me.a,{progress:s?Math.max(a,.02):0,style:[ve.progressBar,t&&ve.progressBarModal]}),e)})),o()(this,"_renderUnsentHeading",(()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:a}=this.props;if(!t&&(a.length>0||e.length>0))return r.createElement(te.a,{style:ve.unsentHeadingContainer},r.createElement(pe.a,{onPress:this._handleOpenUnsent,size:"normalCompact",type:"text"},be))})),o()(this,"_handleOpenUnsent",(()=>{const{history:e}=this.props;Object(d.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")})),o()(this,"_setAppBarRef",(e=>{this._appBarRef=e})),o()(this,"_handleComposeContainerRef",(e=>{this._composeContainerRef=e}))}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:a,fetchDraftTweets:s,fetchScheduledTweets:i,googleAnalyticsPageView:n,scribePageImpression:o}=this.props,r=this._getScribeNamespace();o(r),n(r),this._unlockReload=de.a.acquire(),e&&(i().catch(a()),s().catch(t()))}componentWillUnmount(){this._unlockReload()}render(){const{createDraftTweetApiErrorHandler:e,createScheduledTweetApiErrorHandler:t,draftTweets:a,fetchDraftTweets:s,fetchScheduledTweets:n,hideUnsentTweetsButton:o,history:d,location:h,activeUser:u,composerData:p,googleAnalyticsPageView:m,inReplyToStatus:g,inReplyToStatusId:_,isIntentRoute:y,isSelfThreadReply:b,isSending:C,match:f,scheduledTweets:T,scribePageImpression:w,sendingProgress:v,staticContext:S,subtitle:E,title:x,...R}=this.props,I=y&&!u,{isModal:A}=this.context;return r.createElement(he.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},r.createElement(ge.a,null,(({windowWidth:e})=>{const t=I&&l.a.shouldRenderAsModal(e),a=(null==p?void 0:p.length)>1;return r.createElement(r.Fragment,null,I&&r.createElement(W.a,{history:d,location:h}),!t&&r.createElement(r.Fragment,null,r.createElement(F.b,{appBarRef:this._setAppBarRef,documentTitle:ye,hideBackButton:!1,history:d,middleControl:this._renderUnsentHeading(),onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:E,title:x},r.createElement(c.a,i()({},R,{activeUser:u,history:d,isModal:A,location:h,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,setValidity:this._setValidity,windowWidth:e}))),a?r.createElement(re,null):null))})))}get isCommunityTweet(){var e;const{composerData:t}=this.props,a=t[0].text.length>0;return!!(null==(e=t[0].quotedStatus)?void 0:e.community_id_str)&&!a}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&!!e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(z.h)(e[0].scheduledFor)}}o()(we,"contextType",_e.a);const ve=ie.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}})));t.default=P(we)},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("kYxP");var s=a("3XMw"),i=a.n(s),n=a("3A2y");const o=i.a.b2e94283,r=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[s,i,n,l,c,d]=r.map((e=>t[e]||a[e])),h=[s,i&&`@${i.toString()}`,n,l,c&&c.toString().split(",").map((e=>`#${e}`)).join(" "),d&&o({viaScreenName:d})].filter(Boolean).join(" ");return h?`${h} `:void 0};const l=e=>Object(n.a)(e,r)},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));const s="send-tweet",i="dismiss-composer"},sCk0:function(e,t,a){"use strict";var s=a("KEM+"),i=a.n(s),n=(a("kYxP"),a("ERkP")),o=a("zfvc"),r=a("zrc3");const l=Object.freeze({in:"in",out:"out",static:"static"});class c extends n.Component{constructor(...e){super(...e),i()(this,"state",{isAnimating:!1,renderChildren:n.Children.toArray(this.props.children).map((e=>({status:l.static,child:e})))}),i()(this,"_handleEachAnimateComplete",(()=>{const{isAnimating:e}=this.state,{onAnimateComplete:t,children:a}=this.props;e&&(t&&t(),this.setState({renderChildren:n.Children.toArray(a).map((e=>({status:l.static,child:e}))),isAnimating:!1}))}))}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,s=0;const i=[];for(;s<e.length;){if(a>=t.length){i.push(...e.slice(s).map((e=>({child:e,status:l.out}))));break}const n=t[a],o=e[s];if(n.key===o.key)i.push({child:n,status:l.static}),a+=1;else{const e=Object(r.a)(t,(e=>e.key===o.key));e>=0?(i.push(...t.slice(a,e).map((e=>({child:e,status:l.in}))),{child:t[e],status:l.static}),a=e+1):i.push({child:o,status:l.out})}s+=1}return a<t.length&&i.push(...t.slice(a).map((e=>({child:e,status:l.in})))),i})(t.renderChildren.map((e=>e.child)),n.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every((e=>e.status===l.static))}}render(){const{renderChildren:e}=this.state;return e.map((({status:e,child:t})=>n.createElement(o.a,{animateMount:e!==l.static,key:t.key,onAnimateComplete:this._handleEachAnimateComplete,show:e!==l.out},t)))}}t.a=c},yTN1:function(e,t,a){"use strict";var s=a("ERkP"),i=a("WOwf"),n=a("3XMw"),o=a.n(n),r=a("k6Ei"),l=a("rHpw"),c=a("+/1j"),d=a("MWbm");const h=o.a.c2fc878c,u=o.a.db11b27f,p=e=>e,m=l.a.create((({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},gray700:{color:e.gray700},red500:{color:l.a.isVdlRefreshEnabled()?e.experimentalRed500:e.red500}})));t.a=e=>{const{count:t,maxCount:a,formatNumber:n=p,warningCount:o}=e,g=a-t,_=g>=0?u({count:n(g)}):h({count:n(t-a)}),y=t>=o?s.createElement(c.a,{accessibilityAtomic:!0,accessibilityLiveRegion:"polite",style:l.a.visuallyHidden},_):null,b=Object(i.a)(g,a),C=t>=a?l.a.isVdlRefreshEnabled()?"experimentalRed500":"red500":t>=o?"yellow500":"primary",f=s.createElement(r.a,{color:C,progress:b,size:t>=o?30:20,style:[m.progressCircle,g<=-10&&m.hide]}),T=t>=o?s.createElement(c.a,{style:[m.text,g>0?m.gray700:m.red500]},n(g)):null;return s.createElement(d.a,{style:[m.root,m.center]},y,f,s.createElement(d.a,{style:[l.a.absoluteFill,m.center]},T))}},yZqq:function(e,t,a){"use strict";var s=a("97Jx"),i=a.n(s),n=(a("kYxP"),a("ERkP")),o=a("H7Rt"),r=a("3XMw"),l=a.n(r),c=a("MWbm"),d=a("t62R"),h=a("CKsB"),u=a("/yvb"),p=a("rHpw"),m=a("Zg3A"),g=a("Lsrn"),_=a("k/Ka");const y=(e={})=>Object(_.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[g.a.root,e.style],viewBox:"0 0 24 24"},n.createElement("g",null,n.createElement("path",{d:"M10.43 12.24c-1.37 0-2.89-.15-3.87-1.26-.82-.95-1.09-2.39-.81-4.43C6.13 3.7 7.88 2 10.43 2s4.3 1.7 4.68 4.55c.27 2.04.01 3.49-.81 4.42-.98 1.12-2.51 1.27-3.87 1.27zm0-8.73c-2.39 0-3.03 2.03-3.19 3.24-.21 1.56-.06 2.65.45 3.23.46.53 1.28.75 2.73.75 1.46 0 2.28-.22 2.74-.75.51-.58.66-1.67.45-3.23-.16-1.21-.79-3.24-3.18-3.24zm2.01 18.99H4.22c-.7 0-1.33-.3-1.75-.83-.43-.54-.57-1.26-.4-1.95.88-3.55 4.31-6.03 8.34-6.03.42 0 .75.34.75.75 0 .42-.34.75-.75.75-3.34 0-6.17 2.01-6.88 4.89-.06.25-.02.49.12.66.13.16.32.25.56.25h8.22c.42 0 .75.34.75.75.01.42-.32.76-.74.76zm9.15-10.87l-4.2 8.46c-.01.03-.02.05-.04.07-.02.06-.06.11-.1.15-.05.05-.1.09-.15.13h-.01c-.06.04-.12.06-.19.08-.07.02-.13.03-.2.03-.05 0-.11 0-.17-.02-.06-.01-.11-.03-.16-.06-.06-.03-.12-.07-.18-.12-.01-.01-.03-.02-.04-.03l-3.08-3.27c-.28-.3-.27-.78.04-1.06.3-.29.77-.27 1.06.03l2.34 2.48 3.74-7.53c.18-.37.63-.52 1-.34.37.17.52.63.34 1z"}),n.createElement("path",{d:"M17.1 20.44c.05-.04.1-.08.15-.13 0 .01-.02.03-.03.04-.04.04-.08.06-.12.09z"})));y.metadata={width:24,height:24};var b=y,C=a("EweD");const f=l.a.g6185a9e,T=l.a.g2d04222,w=l.a.baffe39a,v=l.a.af293dc2,S=l.a.h1053f7e,E=l.a.cf7f7e39,x=l.a.cfd2f35d,R=p.a.create((e=>({root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.space64},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,marginBottom:e.spaces.space12},menuRow:{flexDirection:"row",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));var I=e=>{const{dismiss:t,isModal:a,value:s,isMidConversation:i}=e,r=t=>()=>{e.onChange(t),e.dismiss()};return n.createElement(c.a,{accessibilityDescribedBy:"conversation-controls-details",accessibilityLabelledBy:"conversation-controls-title",accessibilityRole:"dialog",style:[R.root,a?R.modal:R.popover]},n.createElement(c.a,{style:R.title},n.createElement(d.c,{nativeID:"conversation-controls-title",weight:"bold"},f),n.createElement(d.c,{color:"gray700",nativeID:"conversation-controls-details",size:"body"},T)),n.createElement(c.a,null,n.createElement(h.a,{Icon:m.a,actionText:w,isSelected:o.a.all===s,onClick:r(o.a.all),selectable:!0,style:R.menuRow,withIconAsThumbnail:!0}),n.createElement(h.a,{Icon:b,actionText:v,isSelected:o.a.community===s,onClick:r(o.a.community),selectable:!0,style:R.menuRow,withIconAsThumbnail:!0}),n.createElement(h.a,{Icon:C.a,actionText:i?E:S,isSelected:o.a.by_invitation===s,onClick:r(o.a.by_invitation),selectable:!0,style:R.menuRow,withIconAsThumbnail:!0}),e.isModal?n.createElement(u.a,{key:"button_cancel",onPress:t,style:R.cancelButton,type:"neutral"},x):null))},A=a("OiMc"),M=a("efqG");t.a=e=>{const{children:t,disabled:a,controlled:s=!1}=e,[o,r]=n.useState(!1),l=n.useCallback((()=>r(!0)),[]),c=n.useCallback((()=>r(!1)),[]),d=s?o?A.a.VISIBILITY_BEHAVIOR.forceVisible:A.a.VISIBILITY_BEHAVIOR.forceHidden:void 0,h="function"==typeof t?t({openPopover:l,closePopover:c}):t;return n.createElement(M.a,{disabled:a,onDismiss:c,renderContent:(t,a)=>{const{children:s,controlled:o,...r}=e;return n.createElement(I,i()({},r,{dismiss:t,isModal:"sheet"===a}))},visibilityBehavior:d},h)}},ynU0:function(e,t,a){"use strict";a.r(t);a("ERkP");var s=a("pcjM"),i=a("SADN");t.default=Object(i.a)(s.default)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.9807aa55.js.map