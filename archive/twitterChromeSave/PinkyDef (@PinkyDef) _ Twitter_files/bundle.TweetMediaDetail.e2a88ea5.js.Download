(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{NP4V:function(e,t,a){"use strict";var o=a("ERkP"),n=a("Lsrn"),r=a("shC7"),c=a("k/Ka");const s=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style,r.a.getConstants().isRTL&&n.a.iconRTL],viewBox:"0 0 24 24"},o.createElement("g",null,o.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),o.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})));s.metadata={width:24,height:24},t.a=s},mpWK:function(e,t,a){"use strict";var o=a("ERkP"),n=a("Lsrn"),r=a("shC7"),c=a("k/Ka");const s=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style,r.a.getConstants().isRTL&&n.a.iconRTL],viewBox:"0 0 24 24"},o.createElement("g",null,o.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),o.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})));s.metadata={width:24,height:24},t.a=s},u1Qz:function(e,t,a){"use strict";a.r(t),a.d(t,"TweetMediaDetailScreen",(function(){return de}));a("kYxP"),a("MvUL");var o=a("ERkP"),n=a("zh9S"),r=a("rxPX"),c=a("0KEI"),s=a("H9MA"),i=a("XOJV"),l=a("P1r1");const d=(e,t)=>t.match.params.screenName,u=(e,t)=>t.match.params.statusId,m=(e,t)=>{const{match:{params:{index:a}}}=t;return parseInt(a,10)-1},w=(e,t)=>i.a.selectFetchStatus(e,u(0,t)),h=(e,t)=>e.location&&e.location.state&&e.location.state[t],p=(e,t)=>h(t,"forwardPivotInfo"),b=(e,t)=>h(t,"promotedContent"),f=(e,t)=>h(t,"socialContext"),v=(e,t)=>h(t,"contextTweetId"),x=(e,t)=>{const a=u(0,t),o=i.a.select(e,a);return o&&o.conversation_id_str||void 0};var E=Object(r.a)().propsFromState((()=>({fetchStatus:w,forwardPivotInfo:p,index:m,screenName:d,tweetId:u,tweet:i.a.createHydratedTweetSelector(u),promotedContent:b,dataSaver:s.c,socialContext:f,contextTweetId:v,rootTweet:i.a.createHydratedTweetSelector(x),showTweetMediaDetailDrawer:l.z}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(c.d)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:i.a.fetchOneIfNeeded,googleAnalyticsPageView:n.a,updateSettings:l.K}))).withAnalytics({page:"tweet",section:"media"}),C=a("KEM+"),g=a.n(C),T=a("ymux"),y=a("rkhm"),I=a("ZUOq");const M=I.a.columnWidths.secondary.normal,S=I.a.columnWidths.primary;var _=a("oQhu"),k=a("AUxQ"),L=a("rHpw"),P=a("yw4N"),O=a("v6aA");class R extends o.Component{constructor(...e){super(...e),g()(this,"_getApiErrorHandlerMap",Object(_.a)((e=>Object(y.a)(e)))),g()(this,"_getModule",Object(_.a)(((e,t)=>Object(T.a)({focalTweetId:e,featureSwitches:t}))))}render(){const{contextTweetId:e,location:t,tweet:a,tweetId:n,promotedContent:r,rootTweet:c,socialContext:s,screenName:i}=this.props,{featureSwitches:l}=this.context,d={selectedTweetId:n};return o.createElement(P.a,{accessibilityExpanded:!0,style:H.root},o.createElement(k.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(i),contextTweetId:e,focalTweet:a,focalTweetId:n,location:t,module:this._getModule(n,l),promotedContent:r,rootTweet:c,selectedTweet:d,socialContext:s,withFocalTweetMedia:!1}))}}g()(R,"contextType",O.a);const H=L.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:M,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}})));var N=R,j=a("v//M"),A=a("W5XZ"),D=a("3XMw"),W=a.n(D),B=a("2doW"),z=a("UPvq"),K=a("VTxf"),X=a("wiP2"),F=a("Rp9C"),V=a("xXop"),U=a("lklz"),Z=a("MWbm"),$=a("7N4s"),q=a("mjJ+"),J=a("/yvb"),Q=a("rOXj"),Y=a("cHvH"),G=a("RCZO"),ee=a("mpWK"),te=a("NP4V"),ae=a("ACHU");const oe=W.a.d132269b,ne=W.a.dd657211,re=W.a.h63a5c3b,ce=W.a.f20b040d,se=W.a.f1d9930c,ie=W.a.a0e81a2e,le=e=>e-M<S,de=e=>{const{isModal:t}=o.useContext($.a),{hideButtons:a,handleMediaDetailZoomed:n,handleMediaItemTapped:r}=Object(G.h)(),[c,s]=o.useState(!1),{analytics:i,contextTweetId:l,createLocalApiErrorHandler:d,dataSaver:u,fetchStatus:m,fetchTweetIfNeeded:w,forwardPivotInfo:h,googleAnalyticsPageView:p,history:b,index:f,location:v,promotedContent:x,rootTweet:E,screenName:C,showTweetMediaDetailDrawer:g,socialContext:T,tweet:y,tweetId:I,updateSettings:M}=e,S=()=>{const{state:e}=v;if(!e)return;const t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0},_=()=>{const e=S();return e?e.index:f},k=()=>{const e=S();return e?e.items:y?y.extended_entities&&y.extended_entities.media:void 0},L=()=>{const e=_(),t=k();return t&&t[e]},P=()=>null!=y&&y.user?`/${y.user.screen_name}/status/${y.id_str}`:"/",O=e=>{const t=S();return t?{...v.state,mediaItems:{...t,index:e}}:v.state},R=e=>e&&le(e)?c:g,H=o.useCallback((()=>{if(y&&y.user&&C.toLowerCase()!==y.user.screen_name.toLowerCase()){const e=y&&y.user?`/${y.user.screen_name}/status/${y.id_str}/photo/${f+1}`:null;e&&b.replace(e)}}),[b,f,C,y]),D=o.useCallback((()=>{if(y){const e=F.a.getTweetItem(y);p(i.contextualScribeNamespace),i.scribe({action:"show",data:{items:[e]}})}}),[i,p,y]),W=()=>{const e=P();b.goBackToNonModalRoute({fallbackPath:e,location:v})},de=o.useCallback((()=>{w(I).catch(d(A.a))}),[d,w,I]),me=e=>()=>{e&&le(e)?(i.scribe({component:"conversation_drawer",action:c?"collapse":"expand"}),s(!c)):(i.scribe({component:"conversation_drawer",action:g?"collapse":"expand"}),M({showTweetMediaDetailDrawer:!g}))},we=e=>{const t=_(),a=k();if(e===t)return;i.scribe({component:"gallery",element:t<e?"next":"prev",action:"click",data:{event_value:e+1}});const o=a&&a[e];b.replace({state:O(e),pathname:o&&o.expanded_url})},he=e=>o.createElement(q.a,{isFixed:!0,items:[{link:P(),text:ne}],onCloseRequested:e}),pe=e=>{const a=L(),n=Object(G.c)(a),r=e&&R(e);return t?o.createElement(J.a,{accessibilityLabel:r?ce:ne,dominantColor:n.rgb,hoverLabel:{label:r?se:ie},icon:r?o.createElement(ee.a,null):o.createElement(te.a,null),onClick:me(e),type:"onMedia"}):y&&!t?o.createElement(J.a,{accessibilityLabel:re,dominantColor:a?n.rgb:void 0,icon:o.createElement(ae.a,null),renderMenu:he,type:a?"onMedia":"invertedPrimary"}):void 0},be=()=>{const e=_(),t=k();if(!t)return o.createElement(K.a,null);const a=t[e],c=Object(G.c)(a).rgb;return o.createElement(B.a,{dataSaver:u,dominantColor:c,mediaIndex:e,mediaItems:t,onDismiss:W,onMediaDetailZoomed:n,onMediaItemChanged:we,onTap:r,promotedContent:x,videoId:1===t.length&&y?U.b.forTweet(y.id_str):void 0})},fe=e=>{const t=L(),n=Object(G.c)(t),r=Q.a.isTouchSupported()&&(()=>{const e=_(),t=k();if(!t)return!1;const a=t[e];return"photo"===(null==a?void 0:a.type)||!1})();return o.createElement(z.a,{backgroundColor:n,footerButtons:y?o.createElement(V.a,{actionSize:"large",activeColor:"white",color:"white",forwardPivotInfo:y.softIntervention||h,style:ue.actionsBar,tweet:y,withCount:!0}):void 0,hideButtons:a,mediaItem:t,onCloseButtonPress:W,overlayFooter:r,topRightButton:pe(e)},o.createElement(j.a,{accessibilityLabel:oe,fetchStatus:m,onRequestRetry:de,render:be}))},ve=o.useRef(null);o.useEffect((()=>{ve.current!==I&&(de(),ve.current=I)}),[de,I]);const xe=o.useRef(null);return o.useEffect((()=>{var e;(null==(e=xe.current)?void 0:e.id_str)!==(null==y?void 0:y.id_str)&&(D(),xe.current=y)}),[D,y]),o.useEffect((()=>{H()}),[H]),o.createElement(X.a.Configure,{headerless:!0},t?o.createElement(Y.a,null,(({windowWidth:e})=>o.createElement(Z.a,{style:ue.container},o.createElement(Z.a,{style:ue.neighbor},fe(e)),R(e)?o.createElement(N,{contextTweetId:l,location:v,promotedContent:x,rootTweet:E,screenName:C,socialContext:T,tweet:y,tweetId:I}):null))):fe())},ue=L.a.create((e=>({actionsBar:{height:e.spaces.space48,marginTop:0,maxWidth:"none",paddingHorizontal:e.spaces.space12},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}))),me=E(de);t.default=me}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.TweetMediaDetail.e2a88ea5.js.map