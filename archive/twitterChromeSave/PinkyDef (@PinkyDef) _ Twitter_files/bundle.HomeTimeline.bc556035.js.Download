(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{cOLG:function(e,t,n){"use strict";n.r(t),n.d(t,"HomeTimeline",(function(){return ct}));var s=n("KEM+"),a=n.n(s),i=n("ERkP"),c=n("es0u"),r=n("wM4e"),o=n("hqKg"),l=n("QK5w"),h=n("G6rE"),d=n("oEGd");const m=Object(o.createSelector)(l.a,h.e.selectLoggedInUser,r.c,r.a,((e,t,n,s)=>({isInitialScreen:!e,loggedInUserAvatarURI:t&&t.profile_image_url_https,loggedInUserName:t&&t.name,useLatest:n,configurationFetchStatus:s})));var p=Object(d.c)(m),u=n("s14A"),b=n("dwig"),f=n("v//M"),_=n("0+qk"),g=(n("kYxP"),n("1YZw")),E=n("rxPX"),y=Object(E.a)().propsFromActions((()=>({addToast:g.b,updateBehavior:r.d}))).withAnalytics(),T=n("3XMw"),w=n.n(T),v=n("/yvb"),S=n("yZDr"),L=n("JGUy");var I=({accessibilityLabel:e,hoverLabel:t,renderMenu:n,onPress:s})=>{const a=i.createElement(S.a,null),c=Object(L.a)();return i.createElement(v.a,{accessibilityLabel:e,hoverLabel:{label:t},icon:a,onPress:s,pullRight:!0,renderMenu:n,type:c})},C=n("mjJ+"),x=n("rHpw"),F=n("Lsrn"),M=n("k/Ka");const P=(e={})=>Object(M.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[F.a.root,e.style],viewBox:"0 0 36 36"},i.createElement("g",null,i.createElement("path",{d:"M27.325 20.595c0 7.333-5.913 13.278-13.206 13.278S.912 27.928.912 20.595 6.825 7.317 14.12 7.317s13.205 5.944 13.205 13.278",fill:"#71C9F8"}),i.createElement("path",{d:"M24.576 20.682c0 5.802-4.678 10.506-10.45 10.506-5.77 0-10.448-4.704-10.448-10.506s4.678-10.506 10.45-10.506c5.77 0 10.448 4.704 10.448 10.506",fill:"#97E3FF"}),i.createElement("path",{d:"M18.98 20.94l-3.86-.583v-6.215c0-.552-.45-1-1-1s-1 .448-1 1v7.076c0 .06.023.112.033.17.007.042.012.082.025.123.026.084.063.158.11.23.022.038.044.075.072.11.05.06.11.11.173.158.042.03.08.06.128.086.065.034.133.055.204.074.04.01.072.035.114.04l4.704.71c.05.01.1.012.15.012.487 0 .914-.355.988-.85.08-.548-.295-1.058-.84-1.14z",fill:"#005FD1"}),i.createElement("path",{d:"M24.553 20.682c0 5.79-4.68 10.5-10.434 10.5S3.683 26.47 3.683 20.68c0-2.953 1.227-5.707 3.31-7.665l.674 1.127c.38.635 1.227.668 1.524.06l1.153-2.36 1.312-2.687c.24-.49-.104-1.067-.65-1.088l-2.988-.116-2.625-.1c-.678-.027-1.05.735-.67 1.37l.804 1.344C2.613 13.065.883 16.736.883 20.683c0 7.333 5.937 13.298 13.234 13.298s13.234-5.964 13.234-13.297h-2.8z",fill:"#1DA1F2"}),i.createElement("path",{d:"M35 13.36h-1.467v-1.34c0-.552-.448-1-1-1s-1 .448-1 1v1.34h-1.467c-.552 0-1 .45-1 1s.448 1 1 1h1.467v1.342c0 .552.448 1 1 1s1-.448 1-1v-1.34H35c.552 0 1-.45 1-1s-.448-1-1-1z",fill:"#FFAD1F"}),i.createElement("path",{d:"M28.646 4.138h-2.01v-2.01c0-.552-.448-1-1-1s-1 .448-1 1v2.01h-2.01c-.552 0-1 .448-1 1s.448 1 1 1h2.01v2.01c0 .552.448 1 1 1s1-.448 1-1v-2.01h2.01c.552 0 1-.448 1-1s-.447-1-1-1z",fill:"#F6809A"})));P.metadata={width:36,height:36};var R=P;const k=(e={})=>Object(M.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[F.a.root,e.style],viewBox:"0 0 36 36"},i.createElement("g",null,i.createElement("path",{d:"M35.508 15.41l-9.295-3.387L22.438 1.47c-.108-.302-.357-.48-.722-.495-.322.007-.604.22-.698.53l-3.293 10.71-9.132 3.805c-.285.118-.467.4-.46.708.007.308.203.58.492.686L17.92 20.8l3.775 10.552c.107.298.39.496.704.496h.016c.322-.007.604-.22.698-.53l3.293-10.712 9.132-3.803c.284-.118.466-.4.46-.708-.007-.308-.203-.58-.492-.686z",fill:"#61BCF6"}),i.createElement("path",{d:"M9.57 4.715l-2.906.065-.06-2.715C6.585 1.34 5.983.763 5.256.78 4.53.796 3.955 1.4 3.97 2.125l.063 2.715-2.747.062C.56 4.92-.016 5.522 0 6.248c.017.726.62 1.302 1.346 1.285l2.747-.062.062 2.716c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.062-2.715 2.905-.066c.725-.017 1.3-.62 1.285-1.346-.017-.726-.62-1.302-1.346-1.285z",fill:"#F16888"}),i.createElement("path",{d:"M14.205 29.69l-1.65.036-.034-1.518c-.016-.726-.618-1.302-1.344-1.286s-1.302.62-1.286 1.345l.034 1.518-1.54.035c-.726.016-1.302.62-1.286 1.345.017.726.62 1.302 1.345 1.286l1.54-.034.034 1.518c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.034-1.518 1.65-.037c.726-.016 1.302-.62 1.286-1.345-.016-.727-.62-1.303-1.345-1.286z",fill:"#FD9E1A"})));k.metadata={width:36,height:36};var O=k,j=n("3JQt"),z=n("M2x3");const A=w.a.j681ac0d,D=w.a.g8220472,H=w.a.ccdd3766,U=w.a.g2657de3,W=w.a.d126cb7c,J=w.a.c41ecf3c,B=w.a.d18aa6d4,N=w.a.bc52b0cd,G=w.a.j6382fe9,$=w.a.f89f6785,K=w.a.e4acfd11;class Q extends i.PureComponent{constructor(...e){super(...e),a()(this,"_renderActionMenu",(e=>{const{useLatest:t}=this.props,n=t?B:J,s=t?R:O;return i.createElement(C.a,{DescriptionIcon:s,description:n,descriptionStyle:q.description,isFixed:!0,items:this._getActionMenuItems(),onCloseRequested:e})})),a()(this,"_getActionMenuItems",(()=>{const{useLatest:e}=this.props,t=e?K:$;return[{text:e?N:G,onClick:this._handleTimelineSwitch,Icon:j.a,subText:t},{link:"/settings/content_preferences",text:A,onClick:this._handleContentPreferences,Icon:z.a}]})),a()(this,"_handleTimelineSwitch",(e=>{const{onToggle:t}=this.props;e(),t()})),a()(this,"_handleContentPreferences",(e=>{const{onContentPreferencesSelect:t}=this.props;e(),t()}))}render(){const{useLatest:e,onPress:t}=this.props,n=e?D:H,s=e?W:U;return i.createElement(I,{accessibilityLabel:n,hoverLabel:s,onPress:t,renderMenu:this._renderActionMenu})}}const q=x.a.create((e=>({description:{fontSize:e.fontSizes.headline1,color:e.colors.text,textAlign:"center",fontWeight:e.fontWeights.bold}})));var X=Q,Y=n("aWzz");const Z=w.a.e4c6d14c,V=w.a.bffa2da7;class ee extends i.Component{constructor(...e){super(...e),a()(this,"_handleToggle",(()=>{const{updateBehavior:e,useLatest:t,addToast:n,analytics:s}=this.props;this.context.viewport.scrollToTop(),s.scribe({component:"customize",element:t?"see_top":"see_latest",action:"click"});const a=t?Z:V;e({useLatest:!t}).then((()=>{n({text:a})}))})),a()(this,"_handleSwitchPress",(()=>{const{analytics:e}=this.props;e.scribe({section:"navigation_bar",element:"customize_button",action:"click"})})),a()(this,"_handleContentPreferencesSelect",(()=>{const{analytics:e}=this.props;e.scribe({component:"customize",element:"see_preferences",action:"click"})}))}render(){const{useLatest:e}=this.props;return i.createElement(X,{onContentPreferencesSelect:this._handleContentPreferencesSelect,onPress:this._handleSwitchPress,onToggle:this._handleToggle,useLatest:e})}}a()(ee,"contextTypes",{viewport:Y.object,featureSwitches:Y.any});var te=y(ee),ne=n("2dXj"),se=Object(E.a)().propsFromState((()=>({loggedInUser:h.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userAvatarURI:e&&e.profile_image_url_https,userName:e&&e.name}))),ae=n("N5qz"),ie=n("MWbm"),ce=n("cHvH"),re=n("5mJL"),oe=n("DNho"),le=n("XP29"),he=n("t62R"),de=n("cjZk"),me=n("3rWK"),pe=n("ll3R"),ue=n("pNJr"),be=n("J0mu");const fe=w.a.g34f2c63({verb:""}),_e=w.a.e349147b,ge=x.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space8},avatarColumn:{flexGrow:1,minWidth:e.spaces.space32,maxWidth:e.spaces.space48},avatar:{width:"100%"},body:{flexDirection:"column",flexGrow:1},fakeInput:{paddingTop:`calc(${e.spaces.space12} + ${e.spaces.space2})`,paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space2},toolbar:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",marginRight:e.spaces.space2,marginTop:`calc(${e.spaces.space16} + ${e.spaces.space2})`},toolbarSection:{alignItems:"center",flexDirection:"row"},iconContainer:{marginLeft:-e.spacesPx.space2},icon:{color:e.colors.primary,height:"1.5em",marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space4} + ${e.spaces.space1})`,width:"1.5em"},firstIcon:{marginLeft:0},lastIcon:{marginRight:0},tweetButton:{marginLeft:e.spaces.space12}})));var Ee=se((({userAvatarURI:e})=>i.createElement(ce.a,null,(({windowWidth:t})=>{const n=!ae.a.isOneColumnSquishedLayout(t);return i.createElement(re.a,{avatarCell:i.createElement(oe.a.Consumer,null,(({avatarSize:t})=>i.createElement(le.a,{size:t,style:ge.avatar,uri:e}))),avatarCellStyle:ge.avatarColumn,cellStyle:ge.body,style:ge.root},i.createElement(he.c,{color:"gray700",numberOfLines:1,size:"headline1",style:ge.fakeInput},_e),i.createElement(ie.a,{style:ge.toolbar},i.createElement(ie.a,{style:[ge.toolbarSection,ge.iconContainer]},i.createElement(de.a,{style:[ge.icon,ge.firstIcon]}),i.createElement(me.a,{style:ge.icon}),n?i.createElement(pe.a,{style:ge.icon}):null,i.createElement(ue.a,{style:ge.icon}),n?i.createElement(be.a,{style:[ge.icon,ge.lastIcon]}):null),i.createElement(ie.a,{style:ge.toolbarSection},i.createElement(v.a,{disabled:!0,style:ge.tweetButton,type:"primary"},fe))))})))),ye=n("zb92"),Te=Object(ye.a)({loader:()=>(ne.a.preload()||Promise.resolve()).then((()=>Promise.all([n.e(0),n.e(3),n.e(6),n.e(10),n.e(73)]).then(n.bind(null,"M5JI")))),renderPlaceholder:()=>i.createElement(Ee,null)});const we=()=>window.performance&&"function"==typeof window.performance.now;var ve=n("yoO3"),Se=n("aeN7"),Le=Object(E.a)().propsFromActions((()=>({addToast:g.b,updateBehavior:r.d}))).withAnalytics(),Ie=n("QIgh"),Ce=n("8UdT"),xe=n("iu0J"),Fe=n("AP4B");var Me={...Object(Ie.a)({tweetDismissable:!0,shouldSelfThreadIncludeAvatar:!0}),...Fe.a,[Ce.b.EventSummary]:Object(xe.a)({errorContext:"HOME_TIMELINE_SCREEN"})},Pe=n("MDbM"),Re=n("FIs5");const ke=w.a.d2c66f1f,Oe=w.a.c3fbf1da,je=w.a.bf17ded9;var ze=({onImpression:e})=>i.createElement(Re.a,{buttonLink:"/i/connect_people",buttonText:je,header:ke,message:Oe,onImpression:e}),Ae=n("oQhu"),De=n("EUHl"),He=n("7BdX"),Ue=n("fTQJ"),We=n("v6aA"),Je=n("WA1W");const Be=w.a.f089620b,Ne={count:void 0},Ge=Object(Ae.a)(((e,t,n)=>e&&t?Object(Je.a)(n):Object(Je.b)(n)));class $e extends i.Component{constructor(e,t){super(e,t),a()(this,"_handleEntriesRendered",(({entries:e,fetchStatus:t})=>{const{isInitialScreen:n,recordTTFT:s}=this.props;if(t===Pe.a.FAILED&&(this._shouldRecordTTFT=!1),this._shouldRecordTTFT&&n&&e.length){const t=e.some((({type:e})=>e===Ce.b.Tweet));this._shouldRecordTTFT=!1,t&&s()}})),a()(this,"_renderEmptyTimeline",(()=>i.createElement(ze,{onImpression:this._handleEmptyHtlImpression}))),a()(this,"_handleEmptyHtlImpression",(()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})})),this._shouldRecordTTFT=!0,this._latestTimelineSwitchEnabled=this.context.featureSwitches.isTrue("home_timeline_latest_timeline_switch_enabled")}render(){const{useLatest:e,timelineRef:t}=this.props,n=Ge(this._latestTimelineSwitchEnabled,e,this.context.featureSwitches);return i.createElement(Ue.a,{entryConfiguration:Me,fetchTopOptions:Ne,module:n,newTweetsPillMode:De.a.URT,onEntriesRendered:this._handleEntriesRendered,prerollDisplayLocation:He.c.TIMELINE_HOME,renderEmptyState:this._renderEmptyTimeline,timelineRef:t,title:Be})}}a()($e,"defaultProps",{recordTTFT:Se.e}),a()($e,"contextType",We.a);var Ke=Le($e),Qe=n("7JQg"),qe=n("VS6U"),Xe=n("Es6L"),Ye=n("LsPn"),Ze=n("aITJ"),Ve=n("0yYu"),et=n("mw9i");const tt=w.a.i5f7b6b8,nt=w.a.d126cb7c,st=w.a.ha8209bb,at={page:"home"},it={page:"home_latest"};class ct extends i.Component{constructor(e,t){super(e,t),a()(this,"_unmounted",!1),a()(this,"_renderTimeline",(()=>{const{useLatest:e,isInitialScreen:t}=this.props;return i.createElement(u.a,null,i.createElement(Ke,{isInitialScreen:t,timelineRef:this._setTimelineRef,useLatest:e}))})),a()(this,"_renderPrimaryContent",(()=>{const{history:e,location:t,configurationFetchStatus:n}=this.props,s=i.createElement(_.a,{history:e});return i.createElement(i.Fragment,null,Object(Xe.a)()?i.createElement(i.Fragment,null,i.createElement(Te,{history:e,location:t}),i.createElement(Ve.a,null)):null,i.createElement(b.a,{component:et.a,fab:s},Ze.b.isKaiOS()?i.createElement(Ye.a,{leftText:tt,onLeftClick:this._handleSoftLeftClick}):null,i.createElement(f.a,{fetchStatus:n,render:this._renderTimeline})))})),a()(this,"_handleSoftLeftClick",(()=>{const{history:e}=this.props;e.push("/account")})),a()(this,"_handleTabRefresh",(()=>{this._timeline&&this._timeline.refreshOrGoTop()})),a()(this,"_handleWindowFocus",(()=>{this._timeline&&this._timeline.fetchTop({onlyIfStale:!0})})),a()(this,"_setTimelineRef",(e=>{this._timeline=e})),this._latestTimelineSwitchEnabled=this.context.featureSwitches.isTrue("home_timeline_latest_timeline_switch_enabled")}componentDidMount(){if(window.addEventListener("focus",this._handleWindowFocus),this.context.featureSwitches.isTrue("responsive_web_framerate_tracking_home_enabled")){const e=`home${Ze.b.isDesktopOS()?"":"_mobile"}`;(we()?n.e(294).then(n.bind(null,"Iid0")).then((({default:e})=>e)):Promise.resolve(void 0)).then((t=>{!this._unmounted&&t&&(this._fpsTracking=t({reportNamespace:e}))}))}}componentWillUnmount(){this._unmounted=!0,window.removeEventListener("focus",this._handleWindowFocus),this._fpsTracking&&this._fpsTracking.stop()}render(){const{useLatest:e,history:t}=this.props,n=this._latestTimelineSwitchEnabled?i.createElement(te,{useLatest:e}):void 0,s=this._latestTimelineSwitchEnabled&&e?nt:st;return i.createElement(Qe.b,{namespace:this._getScribeNamespace()},i.createElement(ve.a,null,i.createElement(qe.a,{history:t,onTabRefresh:this._handleTabRefresh,primaryContent:this._renderPrimaryContent,rightControl:n,sidebarContent:i.createElement(c.a,null),title:s})))}_getScribeNamespace(){const{useLatest:e}=this.props;return e?it:at}}a()(ct,"contextType",We.a);t.default=p(ct)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.HomeTimeline.bc556035.js.map