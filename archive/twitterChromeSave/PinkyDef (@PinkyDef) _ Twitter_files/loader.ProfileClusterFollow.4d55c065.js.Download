(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{Gffe:function(e,t,s){"use strict";s.r(t),s.d(t,"ProfileClusterFollowContainer",(function(){return k}));var o=s("KEM+"),r=s.n(o),n=(s("kYxP"),s("ERkP")),a=s("Xs4Y"),i=s("kGix"),c=s("Rp9C"),l=s("lP98"),d=s("rxPX"),m=s("0KEI");const u="profile-cluster-follow",p=(e,t)=>t.userId,h=(e,t)=>{const s=p(0,t);return l.c(e,{displayLocation:u,similarToUserId:s})},I=(e,t)=>{const s=p(0,t);return l.b(e,{displayLocation:u,similarToUserId:s})};var f=Object(d.a)().propsFromState((()=>({fetchStatus:I,recommendations:h}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(m.d)("WHO_TO_FOLLOW_CONTAINER"),fetchRecommendationsIfNeeded:l.a}))).withAnalytics(),E=s("3XMw"),U=s.n(E),y=s("hOZg"),b=s("Re5t"),_=s("hqDb"),L=s("MWbm"),w=s("/yvb"),C=s("zfvc"),O=s("0yYu"),S=s("6vad"),R=s("rHpw");const A=U.a.ba5a88e3,T=U.a.a526aa66,v=n.createElement(y.a,null);class F extends n.Component{constructor(...e){super(...e),r()(this,"_handleRemoveClusterFollow",(()=>{this.props.onRemoveClusterFollow()})),r()(this,"_renderCloseButton",(()=>n.createElement(w.a,{icon:v,onPress:this._handleRemoveClusterFollow,size:"small",type:"text"})))}render(){const{userIds:e}=this.props;return n.createElement(C.b,{animateMount:!0,duration:"longer",show:!0,type:"slide"},n.createElement(L.a,{accessibilityLabel:T,accessibilityRole:"complementary",style:D.root},n.createElement(O.a,null),n.createElement(S.b,{rightControl:this._renderCloseButton(),text:A}),n.createElement(_.a,{displayMode:b.a.UserCompact,userIds:e.slice(0,3),withItemBorder:!0}),n.createElement(O.a,null)))}}const D=R.a.create((e=>({root:{marginTop:e.spaces.space12}}))),N={component:"suggest_profile_cluster_follow",element:"user",action:"results"},g={component:"suggest_profile_cluster_follow",element:"close_button",action:"click"};class k extends n.PureComponent{constructor(...e){super(...e),r()(this,"_handleImpression",(e=>{const{analytics:t}=this.props,s=e&&e.slice(0,3).map((e=>({...c.a.forUser(e.user),suggestion_details:{source_data:e.token}})));t.scribe({...N,data:{items:s}})})),r()(this,"_handleCloseButtonImpression",(()=>{const{analytics:e,onRemoveClusterFollow:t}=this.props;e.scribe(g),t()}))}componentDidMount(){const{recommendations:e}=this.props;this._fetchRecommendations(this.props),e&&e.length>0&&this._handleImpression(e)}componentDidUpdate(e){const{recommendations:t}=this.props;t!==e.recommendations&&t&&t.length>0&&this._handleImpression(t)}render(){const{recommendations:e}=this.props,t=e&&e.map((e=>e.user));return this._hasLoadedUsers()?n.createElement(F,{onRemoveClusterFollow:this._handleCloseButtonImpression,userIds:t}):null}_fetchRecommendations(e){const{createLocalApiErrorHandler:t,fetchRecommendationsIfNeeded:s,userId:o}=e;s({limit:3,displayLocation:u,similarToUserId:o}).catch(t(a.a))}_hasLoadedUsers(){const{fetchStatus:e,recommendations:t}=this.props;return e===i.a.LOADED&&t.length>0}}const x=f(k);t.default=x},Xs4Y:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var o=s("k49u"),r=s("fs1G");const n={[o.a.ResourceNotFound]:{customAction:r.a}}},hqDb:function(e,t,s){"use strict";var o=s("97Jx"),r=s.n(o),n=s("KEM+"),a=s.n(n),i=(s("kYxP"),s("ERkP")),c=s("k49u"),l=s("rxPX"),d=s("0KEI"),m=s("6xIQ"),u=s("kGix"),p=s("G6rE");const h=(e,t)=>t.userIds,I=(e,t)=>{const{userIds:s}=t;return s.filter((t=>!!p.e.select(e,t)))},f=(e,t)=>{const{userIds:s}=t;return s.reduce(((t,s)=>{const o=p.e.selectFetchStatus(e,s);return t[s]=o===u.a.NONE?u.a.LOADING:o,t}),{})};var E=Object(l.a)().propsFromState((()=>({availableUserIds:Object(m.a)(I,(e=>e)),fetchStatus:Object(m.a)(I,f,h,((e,t,s)=>{let o=u.a.LOADED;for(let r=0;r<s.length;r++){const n=s[r];if(-1===e.indexOf(n)){const e=t[n]||u.a.LOADING;o=o===u.a.LOADED?e:o}if(o===u.a.LOADED)break}return o}))}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(d.d)("USERS_LIST_CONTAINER"),fetchUsersIfNeeded:p.e.fetchManyIfNeeded}))),U=s("v//M"),y=s("3XMw"),b=s.n(y),_=s("pQ3Z"),L=s.n(_),w=s("cFuS"),C=s("Re5t"),O=s("MWbm"),S=s("88ay");const R=({displayMode:e,renderUserCell:t,withFinalItemBorder:s,withItemBorder:o,userIds:r})=>i.createElement(O.a,null,r.map(((n,a)=>{const c=a===r.length-1,l=c&&o&&s||!c&&o;return t?t(n):i.createElement(S.b,{decoration:S.d,displayMode:e,key:n,promotedItemType:w.c.USER,userId:n,withBottomBorder:!!l,withFollowsYou:!0})})));R.defaultProps={displayMode:C.a.UserDetailed,withFinalItemBorder:!0,withItemBorder:!1};var A=R;const T=b.a.f5b426c2,v={viewType:"user_list"};class F extends i.Component{constructor(...e){super(...e),a()(this,"state",{allUsersUnavailable:!1}),a()(this,"_renderContent",(()=>{const{availableUserIds:e,createLocalApiErrorHandler:t,fetchStatus:s,fetchUsersIfNeeded:o,userIds:n,...a}=this.props;return i.createElement(A,r()({},a,{userIds:e}))})),a()(this,"_handleFetch",(()=>{this._fetchUsersIfNeeded()}))}componentDidMount(){this._fetchUsersIfNeeded()}componentDidUpdate(e){L()(e.userIds,this.props.userIds)||this._fetchUsersIfNeeded()}render(){return i.createElement(U.a,{accessibilityLabel:T,clientEventContext:v,fetchStatus:this.state.allUsersUnavailable?u.a.LOADED:this.props.fetchStatus,onRequestRetry:this._handleFetch,render:this._renderContent,retryable:!1})}_fetchUsersIfNeeded(){const{createLocalApiErrorHandler:e,fetchUsersIfNeeded:t,availableUserIds:s,userIds:o}=this.props;t(o).then((()=>{this.setState({allUsersUnavailable:!1})}),e({[c.a.AddressBookLookupNotFound]:{customAction:()=>{0===s.length&&this.setState({allUsersUnavailable:!0})}},[c.a.OtherUserSuspended]:{customAction:()=>{0===s.length&&this.setState({allUsersUnavailable:!0})}}}))}}const D=E(F);t.a=D},lP98:function(e,t,s){"use strict";s.d(t,"c",(function(){return U})),s.d(t,"b",(function(){return y})),s.d(t,"a",(function(){return b}));var o=s("/kEJ"),r=s("oEOe"),n=s("RgK2"),a=s.n(n),i=s("kGix"),c=s("Ssj5");const l="recommendations",d=30,m="rweb/recommendations/FETCH_REQUEST",u="rweb/recommendations/FETCH_SUCCESS",p="rweb/recommendations/FETCH_FAILURE",h={},I=({displayLocation:e,similarToUserId:t})=>e+(t?`_${t}`:"");c.a.register({[l]:function(e=h,t){if(!t.meta)return e;switch(t.type){case m:{const s=I(t.meta);return{...e,[s]:{...e[s],fetchStatus:i.a.LOADING}}}case p:{const s=I(t.meta);return{...e,[s]:{...e[s],fetchStatus:i.a.FAILED}}}case u:{const s=I(t.meta),o=t.payload&&t.payload.entities?t.payload.entities:{recommendations:a.a},r=(t.payload&&t.payload.result?t.payload.result:E).map((e=>o.recommendations[e]));return{...e,[s]:{...e[s],fetchStatus:i.a.LOADED,recommendations:r}}}default:return e}}});const f=[],E=[],U=(e,{displayLocation:t,similarToUserId:s})=>{const o=e.recommendations[I({displayLocation:t,similarToUserId:s})];return o&&o.recommendations?o.recommendations:f},y=(e,{displayLocation:t,similarToUserId:s})=>{const o=e.recommendations[I({displayLocation:t,similarToUserId:s})];return o?o.fetchStatus:i.a.NONE},b=e=>(t,s,n)=>{const c=s(),{displayLocation:l,similarToUserId:h}=e,I=U(c,{displayLocation:l,similarToUserId:h}),f=y(c,{displayLocation:l,similarToUserId:h})===i.a.LOADED;return I&&f?Promise.resolve(a.a):t((e=>(t,s,{api:n})=>{const{displayLocation:a,itsInterests:i,limit:c=d,similarToUserId:l}=e;return Object(r.b)(t,{request:n.Recommendations.fetch,params:{display_location:a,itsInterests:i,limit:c,user_id:l}})({actionTypes:{REQUEST:m,SUCCESS:u,FAILURE:p},context:"FETCH_RECOMMENDATIONS",meta:{displayLocation:a,similarToUserId:l}},(e=>{if(e&&e.entities)return[Object(o.c)(e.entities)]}))})(e))}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.ProfileClusterFollow.4d55c065.js.map