if (self.CavalryLogger) { CavalryLogger.start_js(["mFiJDd7"]); }

__d("MWV2IsTabFocusedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(!1);function a(a){var b=a.children;a=a.isFocused;return h.createElement(i.Provider,{value:a,children:b})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);
__d("MWV2ContextBanner.bs",["LSNullstateDescriptionType.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LSThreadTitle.bs","MDSTextCommon.react","MWThreadPicture.bs","RecoverableViolation.react","bs_caml","bs_caml_int64","bs_caml_option","cr:11000","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("cr:11000")==null?void 0:b("bs_caml_option").some(b("cr:11000"));(h||(h=b("stylex"))).inject(".rj2hsocd{padding-bottom:12px}",1);var k={wrapper:{paddingBottom:"rj2hsocd"}};function l(a){var c=a.kind;a=a.text;if(b("bs_caml").i64_eq(c,b("bs_caml_int64").zero)||b("bs_caml").i64_eq(c,b("LSNullstateDescriptionType.bs").subtext)||b("bs_caml").i64_eq(c,b("LSNullstateDescriptionType.bs").titleSmallDefault)||b("bs_caml").i64_eq(c,b("LSNullstateDescriptionType.bs").titleSmallSubtext))return i.jsx("div",{className:(h||(h=b("stylex")))(k.wrapper),children:i.jsx(b("MDSTextCommon.react"),{align:"center",color:"secondary",type:"body4",children:a})});else return i.jsx(b("RecoverableViolation.react"),{errorMessage:"Unhandled nullstate description",projectName:"messenger_comet"})}c={styles:k,make:l};h.inject(".h6ft4zvz{padding-top:20px}",1);h.inject(".rj2hsocd{padding-bottom:12px}",1);h.inject(".aesu6q9g{padding-right:12px}",1,".aesu6q9g{padding-left:12px}");h.inject(".e4ay1f3w{padding-left:12px}",1,".e4ay1f3w{padding-right:12px}");h.inject(".alzwoclg{display:flex}",1);h.inject(".jcxyg2ei{justify-content:center}",1);h.inject(".qjfq86k5{margin-bottom:12px}",1);h.inject(".qjfq86k5{margin-bottom:12px}",1);var m={container:{paddingTop:"h6ft4zvz",paddingBottom:"rj2hsocd",paddingEnd:"aesu6q9g",paddingStart:"e4ay1f3w"},image:{display:"alzwoclg",justifyContent:"jcxyg2ei",marginBottom:"qjfq86k5"},title:{marginBottom:"qjfq86k5"}};function n(a){a=a.thread;var c=a.G,d=a.F,e=a.E,f=a.D,g=a.C,k=a.B;return i.jsxs("div",{className:(h||(h=b("stylex")))(m.container),children:[i.jsx("div",{className:h(m.image),children:i.jsx(b("MWThreadPicture.bs").make,{photoSize:"s_60",badgeSize:14,thread:a})}),i.jsx("div",{className:h(m.title),children:i.jsx(b("MDSTextCommon.react"),{align:"center",type:"headlineEmphasized3",children:i.jsx(b("LSThreadTitle.bs").make,{thread:a,wrapOutput:function(a,b,c){return c}})})}),k!==void 0&&g!==void 0?i.jsx(l,{kind:g,text:k}):null,f!==void 0&&e!==void 0?i.jsx(l,{kind:e,text:f}):null,d!==void 0&&c!==void 0?i.jsx(l,{kind:c,text:d}):null,b("cr:11000")==null?null:i.jsx(j.make,{thread:a})]})}d={styles:m,make:n};function a(a){a=a.thread;var c=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").disableContextBanner,a);if(c)return null;else return i.jsx(n,{thread:a})}e=a;f.$MWContextBannerQuickActions$OR$null$requireCond=b("cr:11000");f.NullstateDescription=c;f.Impl=d;f.make=e}),null);
__d("MWV2ThreadNullstate.bs",["CometPressable.react","FBID.bs","LS.bs","LSMailboxOptimisticSendMessageStoredProcedure","LSMailboxType.bs","LSNullstateCTAType.bs","LSThreadAttributionStore.bs","LSThreadAttributionTypeUtil.bs","LSTransaction.bs","LsBotComposerQuickReplyTappedFalcoEvent","LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent","LsFalcoEventEntryPoint.bs","MDSTextCommon.react","MWInboxProvider.bs","MWLSActor.bs","MessageSendClickFalcoEvent","ReStore.bs","bs_caml","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","promiseDone","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");(h||(h=b("stylex"))).inject(".i85zmo3j{align-items:center}",1);h.inject(".lg77cbj3{background-color:var(--messenger-card-background)}",1);h.inject(".n1tycefo{border-top-left-radius:16px}",1,".n1tycefo{border-top-right-radius:16px}");h.inject(".hjca6b3d{border-top-right-radius:16px}",1,".hjca6b3d{border-top-left-radius:16px}");h.inject(".pujv42rp{border-bottom-right-radius:16px}",1,".pujv42rp{border-bottom-left-radius:16px}");h.inject(".nnnzfr32{border-bottom-left-radius:16px}",1,".nnnzfr32{border-bottom-right-radius:16px}");h.inject(".tlof4y1e{--T68779821:0 8px 16px var(--media-inner-border);-webkit-box-shadow:var(--T68779821);box-shadow:0 8px 16px var(--media-inner-border)}",1);h.inject(".bdao358l{box-sizing:border-box}",1);h.inject(".pbevjfx6{color:var(--primary-text)}",1);h.inject(".fxk3tzhb{display:inline-flex}",1);h.inject(".k1z55t6l{font-size:0.9375rem}",1);h.inject(".tes86rjd{font-weight:400}",1);h.inject(".jcxyg2ei{justify-content:center}",1);h.inject(".fzsidkae{margin-top:2px}",1);h.inject(".h07fizzr{margin-right:8px}",1,".h07fizzr{margin-left:8px}");h.inject(".l3gxykhd{margin-bottom:2px}",1);h.inject(".jbg88c62{margin-left:8px}",1,".jbg88c62{margin-right:8px}");h.inject(".l4uc2m3f{overflow-wrap:break-word}",1);h.inject(".d1v569po{padding-top:5px}",1);h.inject(".onux6t7x{padding-bottom:5px}",1);h.inject(".aesu6q9g{padding-right:12px}",1,".aesu6q9g{padding-left:12px}");h.inject(".e4ay1f3w{padding-left:12px}",1,".e4ay1f3w{padding-right:12px}");h.inject(".t7p7dqev{word-break:break-word}",1);var j={pill:{alignItems:"i85zmo3j",backgroundColor:"lg77cbj3",borderTopStartRadius:"n1tycefo",borderTopEndRadius:"hjca6b3d",borderBottomEndRadius:"pujv42rp",borderBottomStartRadius:"nnnzfr32",boxShadow:"tlof4y1e",boxSizing:"bdao358l",color:"pbevjfx6",display:"fxk3tzhb",fontSize:"k1z55t6l",fontWeight:"tes86rjd",justifyContent:"jcxyg2ei",marginTop:"fzsidkae",marginEnd:"h07fizzr",marginBottom:"l3gxykhd",marginStart:"jbg88c62",overflowWrap:"l4uc2m3f",paddingTop:"d1v569po",paddingBottom:"onux6t7x",paddingEnd:"aesu6q9g",paddingStart:"e4ay1f3w",wordBreak:"t7p7dqev"}};function k(a){var c=a.onClick;a=a.children;return i.jsx(b("CometPressable.react"),{onPress:c,overlayDisabled:!0,xstyle:function(a){return[j.pill]},children:a})}c={styles:j,make:k};h.inject(".eg9484fr{padding-bottom:18px}",1);h.inject(".b0eko5f3{padding-right:8px}",1,".b0eko5f3{padding-left:8px}");h.inject(".fwlpnqze{padding-left:8px}",1,".fwlpnqze{padding-right:8px}");h.inject(".q6feio67{padding-bottom:20px}",1);h.inject(".b0eko5f3{padding-right:8px}",1,".b0eko5f3{padding-left:8px}");h.inject(".fwlpnqze{padding-left:8px}",1,".fwlpnqze{padding-right:8px}");h.inject(".alzwoclg{display:flex}",1);h.inject(".cqf1kptm{flex-direction:column}",1);h.inject(".gldv74r8{align-items:flex-end}",1);h.inject(".jcxyg2ei{justify-content:center}",1);h.inject(".m8h3af8h{margin-top:0}",1);h.inject(".l7ghb35v{margin-right:0}",1,".l7ghb35v{margin-left:0}");h.inject(".kjdc1dyq{margin-bottom:0}",1);h.inject(".kmwttqpk{margin-left:0}",1,".kmwttqpk{margin-right:0}");h.inject(".e4jbjxdy{padding-left:52px}",1,".e4jbjxdy{padding-right:52px}");h.inject(".aesu6q9g{padding-right:12px}",1,".aesu6q9g{padding-left:12px}");h.inject(".rj2hsocd{padding-bottom:12px}",1);h.inject(".gb2oqlaf{align-self:center}",1);h.inject(".aesu6q9g{padding-right:12px}",1,".aesu6q9g{padding-left:12px}");h.inject(".e4ay1f3w{padding-left:12px}",1,".e4ay1f3w{padding-right:12px}");var l={welcome_text:{paddingBottom:"eg9484fr",paddingEnd:"b0eko5f3",paddingStart:"fwlpnqze"},privacy_text:{paddingBottom:"q6feio67",paddingEnd:"b0eko5f3",paddingStart:"fwlpnqze"},cta_list:{display:"alzwoclg",flexDirection:"cqf1kptm",alignItems:"gldv74r8",justifyContent:"jcxyg2ei",marginTop:"m8h3af8h",marginEnd:"l7ghb35v",marginBottom:"kjdc1dyq",marginStart:"kmwttqpk"},cta_list_item:{paddingStart:"e4jbjxdy",paddingEnd:"aesu6q9g",paddingBottom:"rj2hsocd"},cta_list_item_center:{alignSelf:"gb2oqlaf",paddingEnd:"aesu6q9g",paddingStart:"e4ay1f3w"}};function m(a,c,d){var e=b("ReStore.bs").useHook(void 0),f=b("MWLSActor.bs").useActor(void 0),g=i.useContext(b("MWInboxProvider.bs").context),h=g.refParam;return i.useCallback(function(g){return function(i){var j=b("LSThreadAttributionStore.bs").getSource(c,b("bs_int64").to_string(a.a)),k=b("LSThreadAttributionTypeUtil.bs").toLSThreadAttribution(j);j=b("bs_caml").i64_eq(g.f,b("LSNullstateCTAType.bs").getStarted)&&b("bs_caml_obj").caml_equal(g.g,i.a);var l=j?h:void 0;b("promiseDone")(b("LSTransaction.bs").run(e,function(c){return b("LSMailboxOptimisticSendMessageStoredProcedure")(f,a.a,a.c,b("LSMailboxType.bs").messenger,i.c,void 0,void 0,void 0,void 0,void 0,void 0,k,l!==void 0?b("bs_caml_option").valFromOption(l):void 0,i.e!==void 0?b("bs_caml_option").valFromOption(i.e):void 0,void 0,void 0,void 0,void 0,!0,!0,void 0,d!==void 0?b("bs_caml_option").valFromOption(d):void 0,void 0,b("LS.bs").make(c))},"readWrite"),void 0,void 0);var m=b("FBID.bs").ofString(b("bs_int64").to_string(a.a)),n=function(a){if(m===void 0)return;var c=b("bs_caml_option").valFromOption(m);b("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent").log(function(a){return{page:{id:c}}})},o=function(a){if(m===void 0)return;var c=b("bs_caml_option").valFromOption(m);b("LsBotComposerQuickReplyTappedFalcoEvent").log(function(a){return{page:{id:c},quick_reply:{id:"",type:64},display:void 0}})};j?n(void 0):o(void 0);b("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:b("LsFalcoEventEntryPoint.bs").icebreaker}}})}},[e,f,b("bs_int64").to_string(a.a),c,h])}function a(a){var c=a.thread,d=a.nullstate,e=a.nullstateCtas,f=a.lsSource;a=a.initiatingSource;f=f!==void 0?f:"unknown";var g=m(c,f,a);c=d.b;f=d.c;return i.jsxs(i.Fragment,{children:[c!==void 0?i.jsx("div",{className:(h||(h=b("stylex")))(l.welcome_text),children:i.jsx(b("MDSTextCommon.react"),{align:"center",color:"secondary",type:"headline4",children:c})}):null,f!==void 0?i.jsx("div",{className:(h||(h=b("stylex")))(l.privacy_text),children:i.jsx(b("MDSTextCommon.react"),{align:"center",color:"secondary",type:"body4",children:f})}):null,i.jsx("ul",{className:(h||(h=b("stylex")))(l.cta_list),children:e.map(function(a){var c=b("bs_caml").i64_eq(d.f,b("LSNullstateCTAType.bs").getStarted)&&b("bs_caml_obj").caml_equal(d.g,a.a);return i.jsx("li",{className:(h||(h=b("stylex")))(l.cta_list_item,c?l.cta_list_item_center:!1),children:i.jsx(k,{onClick:function(c){return b("bs_curry")._2(g,d,a)},children:a.c})},b("bs_int64").to_string(a.a))})})]})}d=a;f.Pill=c;f.styles=l;f.useSendIcebreakerMessage=m;f.make=d}),null);
__d("MWV2OpenThreadDetail.bs",["LS.bs","LSAuthorityLevel.bs","LSMailboxOptimisticMarkThreadReadV2StoredProcedure","LSMessagingInitiatingSourceHook.bs","LSTransaction.bs","MWChatLoadMoreItemsIncrementally.bs","MWInboxThreadMessagesSpinner.bs","MWV2ChatMessageListColumn.bs","MWV2ContextBanner.bs","MWV2ConversationScrollerRefs.bs","MWV2CurrentVisibleMessage.bs","MWV2FetchMessagesPage.bs","MWV2JumpToMostRecentMessageButton.bs","MWV2MessageList.bs","MWV2MessageScroller.bs","MWV2QuickReplies.bs","MWV2ThreadNullstate.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","SortedAsyncIterable.bs","bs_caml","bs_caml_array","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","clearTimeout","cr:11088","promiseDone","qex","react","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){var d=b("bs_int64").compare(a.c,c.c);if(d!==0)return d;d=a.d;var e=c.d;if(d===void 0)if(e!==void 0)return-1;else return b("bs_int64").compare(a.b,c.b);if(e===void 0)return 1;d=b("bs_int64").compare(d,e);if(d!==0)return d;else return b("bs_int64").compare(a.b,c.b)}function j(a,c){var d=b("ReStore.bs").useHook(void 0),e=b("ReQLSubscription.bs").useArray(h.useMemo(function(){var e=b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"messages").asc,{hd:c.a,tl:0});if(a!==void 0)return b("ReQL.bs").bounds(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"messages").asc,{hd:c.a,tl:0}),{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:a.b,tl:0}},{NAME:"lessThanOrEqual",VAL:{hd:a.d,tl:0}}]});else if(b("bs_caml").i64_lt(c.Z,b("LSAuthorityLevel.bs").authoritative))return e;else return b("SortedAsyncIterable.bs").empty(void 0)},[d,JSON.stringify(c.a),JSON.stringify(c.Z),JSON.stringify(a)]));return h.useMemo(function(){return e.sort(i)},[e])}function k(a){var c=b("ReStore.bs").useHook(void 0);return h.useCallback(function(d){if(b("bs_caml").i64_ge(a.Z,b("LSAuthorityLevel.bs").authoritative)){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSMailboxOptimisticMarkThreadReadV2StoredProcedure")(a.a,b("bs_caml_int64").of_float(Date.now()),b("LS.bs").make(c))},"readWrite"),void 0,void 0);return}},[JSON.stringify(a.Z),JSON.stringify(a.a),c])}function l(a){var c=b("ReStore.bs").useHook(void 0),d=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"thread_nullstate").asc,{hd:a.a,tl:0})},[c,JSON.stringify(a.a)])),e=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"thread_nullstate_ctas").index("threadKeyCtaId").asc,{hd:a.a,tl:0})},[c,JSON.stringify(a.a)]));return[d,e]}function a(a){a=a.thread;var c=b("MWV2ConversationScrollerRefs.bs").useHook(void 0),d=h.useState(function(){return!0}),e=d[1],f=b("MWV2CurrentVisibleMessage.bs").useHook(a,c.scrollerRef),g=f.visibleMessage,i=f.messageRange,m=f.messageRange;g=b("MWChatLoadMoreItemsIncrementally.bs").useLoadMore(g!==void 0?!0:i!==void 0?i.i:!1,void 0,void 0,j(f.messageRange,a),b("MWV2FetchMessagesPage.bs").useFetchMessagesPage(f.messageRange,a.a),m!==void 0?m.h:!1);i=g[2];m=g[0];var n=f.messageRange;n=n!==void 0?n.i:!1;var o=k(a),p=l(a),q=p[0],r=b("LSMessagingInitiatingSourceHook.bs").useHook(void 0),s=b("cr:11088")==null?null:h.jsx(b("cr:11088").make,{thread:a}),t=b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(b("qex")._("297")),"enabled"),u={contents:void 0},v=t?function(a){a=u.contents;a!==void 0&&b("clearTimeout")(b("bs_caml_option").valFromOption(a));a=c.scrollPositionRef.current;a===0?u.contents=b("bs_caml_option").some(b("setTimeout")(function(a){return b("bs_curry")._1(e,function(a){return!0})},0)):u.contents=b("bs_caml_option").some(b("setTimeout")(function(a){return b("bs_curry")._1(e,function(a){return!1})},200))}:function(a){};return q!==void 0&&b("bs_caml").i64_eq(a.i,b("bs_caml_int64").zero)?h.jsxs(h.Fragment,{children:[s,h.jsx(b("MWV2ContextBanner.bs").make,{thread:a}),h.jsx(b("MWV2ChatMessageListColumn.bs").Grow.make,{children:null}),h.jsx(b("MWV2ThreadNullstate.bs").make,{thread:a,nullstate:q,nullstateCtas:p[1],lsSource:"inboxInThread",initiatingSource:r})]}):h.jsxs(h.Fragment,{children:[s,h.jsxs(b("MWV2MessageScroller.bs").make,{children:[h.jsxs(b("MWV2ChatMessageListColumn.bs").Shrinkwrap.make,{children:[h.jsx(b("MWV2ChatMessageListColumn.bs").VerticalRhythm.make,{height:20}),i?h.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{}):h.jsx(b("MWV2ContextBanner.bs").make,{thread:a}),h.jsx(b("MWV2ChatMessageListColumn.bs").VerticalRhythm.make,{height:10})]}),h.jsx(b("MWV2ChatMessageListColumn.bs").Grow.make,{children:null}),h.jsx(b("MWV2MessageList.bs").make,{messages:m,thread:a,isSecureThread:!1,messageElementRefs:f.messageElementRefs.current,scrollerRefs:c}),n&&t?h.jsx(b("MWV2ChatMessageListColumn.bs").Shrinkwrap.make,{children:h.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{})}):null,h.jsx(b("MWV2QuickReplies.bs").make,{threadKey:a.a,message:m[m.length-1|0]})],thread:a,fetchMore:g[1],markThreadAsRead:o,lastMessageToCalculateIfThreadIsRead:m.length!==0?b("bs_caml_array").get(m,m.length-1|0):void 0,scrollerRefs:c,hasMoreBefore:i,hasMoreAfter:n,onScroll:v}),t?h.jsx(b("MWV2JumpToMostRecentMessageButton.bs").make,{scrollerRefs:c,hasMoreAfter:n,visible:!d[0]||n,onPress:function(a){return b("bs_curry")._1(e,function(a){return!0})}}):null]})}c=b("cr:11088");d=a;f.$MWV2ArmadilloDogfoodingUpsell$requireCond=b("cr:11088");f.mwv2ArmadilloDogfoodingUpsell=c;f.useMessages=j;f.make=d}),null);